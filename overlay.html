<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Overlay TV Marataízes</title>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<style>
  :root{
    --gn-red:#C4170C;
    --slug-dark:#B3130B;
    --white:#fff;
    --bar-h:92px;   /* altura da tarja */
    --fs:40px;      /* fonte do letreiro */
    --speed:30s;    /* velocidade do letreiro */
  }

  html,body{
    margin:0;
    height:100%;
    background:transparent;
    color:var(--white);
    font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif
  }

  /* TOPO (clima + relógio) */
  .topbar{
    position:fixed; top:0; left:0; right:0; height:80px;
    background:#0a1628;
    display:flex; align-items:center; gap:16px;
    padding:0 8px;
    box-shadow:0 6px 16px rgba(0,0,0,.25);
    z-index:3;
    pointer-events:none;
  }
  .weather-widget{
    flex:1 1 auto;
    background:#f5f5f5;
    border-radius:6px;
    overflow:hidden;
    pointer-events:auto;
  }
  .clock{
    flex:0 0 auto;
    display:flex; flex-direction:column;
    align-items:flex-end;
    font-weight:700;
    letter-spacing:.2px;
    color:#e9f2ff;
    text-shadow:0 1px 0 rgba(0,0,0,.35)
  }
  .clock .time{ font-size:18px }
  .clock .date{ font-size:14px; opacity:.9 }

  /* RODAPÉ */
  .gnbar{
    position:fixed;
    left:0; right:0; bottom:0;
    height:var(--bar-h);
    background:var(--gn-red);
    display:flex; align-items:center; gap:18px;
    border-top:4px solid rgba(0,0,0,.18);
    box-shadow:0 -10px 28px rgba(0,0,0,.35);
    overflow:hidden;
    pointer-events:none;
    z-index:4;
  }
  .slug{
    margin-left:16px;
    background:var(--slug-dark);
    padding:12px 18px;
    border-radius:12px;
    font-weight:900;
    letter-spacing:.4px;
    text-transform:uppercase;
    white-space:nowrap;
  }
  .track{
    position:relative;
    flex:1;
    height:100%;
    overflow:hidden;
  }
  .rail{
    position:absolute;
    top:0; left:0;
    height:100%;
    display:flex; align-items:center; gap:42px;
    white-space:nowrap;
    font-weight:900;
    font-size:var(--fs);
    line-height:1.1;
    color:#fff;
    text-shadow:0 2px 0 rgba(0,0,0,.25);
    will-change:transform;
    animation:scroll var(--speed) linear infinite;
  }
  @keyframes scroll{ from{transform:translateX(0)} to{transform:translateX(-50%)} }
  .copy{ display:inline-block; padding-right:64px }

  @media (max-width:900px){
    :root{ --bar-h:74px; --fs:30px }
    .topbar{ height:72px }
    .clock .time{ font-size:16px }
    .clock .date{ font-size:12px }
  }
</style>
</head>
<body>

  <!-- TOPO: clima + relógio -->
  <div class="topbar" aria-label="Clima e hora">
    <div class="weather-widget">
      <!-- Código oficial do Meteoblue -->
      <div id="meteoblue-widget" style="width: 100%; height: 80px;">
        <script type="text/javascript" src="https://www.meteoblue.com/en/weather/widget/daily/marataizes_brazil_3457819?geoloc=fixed&days=4&tempunit=CELSIUS&windunit=KILOMETER_PER_HOUR&precipunit=MILLIMETER&pictoicon=1&maxtemperature=1&mintemperature=1&coloured=1&city=3457819&country=Brazil&showcity=1&showcountry=0&showregion=0"></script>
      </div>
    </div>
    <div class="clock" aria-label="Relógio">
      <span class="time" id="clockTime">--:--</span>
      <span class="date" id="clockDate">--/--/----</span>
    </div>
  </div>

  <!-- RODAPÉ: tarja + letreiro -->
  <div class="gnbar" role="marquee" aria-label="Rodapé de notícias">
    <div class="slug" id="slug">NEWS</div>
    <div class="track">
      <div class="rail" id="rail">
        <div class="copy" id="a">TV Marataízes ao vivo • Marataízes registra crescimento de 47,4% no número de empresas ativas •</div>
        <div class="copy" id="b">TV Marataízes ao vivo • Marataízes registra crescimento de 47,4% no número de empresas ativas •</div>
      </div>
    </div>
  </div>

<script>
  /* ===== Relógio ===== */
  function pad2(n){ return String(n).padStart(2,'0'); }
  function updClock(){
    const now = new Date();
    const hh = pad2(now.getHours());
    const mm = pad2(now.getMinutes());
    const dd = pad2(now.getDate());
    const mo = pad2(now.getMonth()+1);
    const yyyy = now.getFullYear();
    document.getElementById('clockTime').textContent = `${hh}:${mm}`;
    document.getElementById('clockDate').textContent = `${dd}/${mo}/${yyyy}`;
  }
  updClock(); setInterval(updClock, 1000);

  /* ===== Parâmetros por URL ===== */
  const qs = new URLSearchParams(location.search);
  const rail = document.getElementById('rail');
  const a    = document.getElementById('a');
  const b    = document.getElementById('b');
  const slug = document.getElementById('slug');

  const size  = parseInt(qs.get('size')||'',10);
  const color = (qs.get('color')||'').replace('#','').trim();
  const tag   = (qs.get('slug') || 'NEWS').trim();
  const msg   = qs.get('msg');
  const speed = parseInt(qs.get('speed')||'',10);

  if(!Number.isNaN(size)&&size>12) document.documentElement.style.setProperty('--fs', size+'px');
  if(!Number.isNaN(speed)&&speed>4) document.documentElement.style.setProperty('--speed', speed+'s');
  if(color) rail.style.color = '#'+color;
  slug.textContent = tag || 'NEWS';

  if (msg){
    const text = decodeURIComponent(msg).trim();
    const content = text.endsWith('•') ? text : text + ' •';
    a.textContent = content;
    b.textContent = content;
    rail.style.animation='none'; rail.offsetHeight; rail.style.animation='';
  }
</script>
</body>
</html>
