<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Overlay TV Marataízes</title>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<style>
  :root{
    --gn-red:#C4170C;
    --slug-dark:#B3130B;
    --top-bg:#0a1628;
    --white:#fff;
    --bar-h:92px;
    --fs:30px;
    --speed:25s; /* velocidade intermediária por padrão */
  }
  html,body{margin:0;height:100%;background:transparent;color:var(--white);
    font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif}
  /* topo clima */
  .topbar{position:fixed;top:0;left:0;right:0;height:56px;background:var(--top-bg);
    display:flex;align-items:center;padding:0 16px;box-shadow:0 6px 16px rgba(0,0,0,.25);pointer-events:none;z-index:2}
  .topbar iframe{width:100%;height:36px;border:0;background:transparent;pointer-events:none}
  /* rodapé */
  .gnbar{position:fixed;left:0;right:0;bottom:0;height:var(--bar-h);background:var(--gn-red);
    display:flex;align-items:center;gap:18px;border-top:4px solid rgba(0,0,0,.18);
    box-shadow:0 -10px 28px rgba(0,0,0,.35);overflow:hidden;pointer-events:none;z-index:3}
  .slug{margin-left:16px;background:var(--slug-dark);padding:12px 18px;border-radius:12px;
    font-weight:900;letter-spacing:.4px;text-transform:uppercase;color:#fff;white-space:nowrap}
  .track{position:relative;flex:1;height:100%;overflow:hidden}
  .rail{position:absolute;top:0;left:0;height:100%;display:flex;align-items:center;gap:42px;
    white-space:nowrap;font-weight:900;font-size:var(--fs);line-height:1.1;color:#fff;
    text-shadow:0 2px 0 rgba(0,0,0,.25);will-change:transform;animation:scroll var(--speed) linear infinite}
  @keyframes scroll{from{transform:translateX(0)}to{transform:translateX(-50%)}}
  .copy{display:inline-block;padding-right:64px}
  @media (max-width:900px){:root{--bar-h:74px;--fs:30px}.topbar{height:52px}.topbar iframe{height:32px}}
</style>
</head>
<body>
  <!-- TOPO -->
  <div class="topbar">
    <iframe src="https://www.meteoblue.com/en/weather/widget/daily/marataizes_brazil_3457819?geoloc=fixed&days=0&tempunit=CELSIUS&windunit=KILOMETER_PER_HOUR&precipunit=MILLIMETER&coloured=0&pictoicon=1&maxtemperature=1&mintemperature=1"
      scrolling="no" allowtransparency="true"
      sandbox="allow-same-origin allow-scripts allow-popups allow-popups-to-escape-sandbox"></iframe>
  </div>

  <!-- RODAPÉ -->
  <div class="gnbar" aria-label="Rodapé de notícias">
    <div class="slug" id="slug">NEWS</div>
    <div class="track">
      <!-- Fallback: texto padrão (aparece mesmo sem JS) -->
      <div class="rail" id="rail">
        <div class="copy" id="a">Somzera e Imagem pro Relax — TV Marataízes ao vivo • Brasil • Mundo • Espírito Santo • Marataízes: cidade de praia e gente batalhadora •</div>
        <div class="copy" id="b">Somzera e Imagem pro Relax — TV Marataízes ao vivo • Brasil • Mundo • Espírito Santo • Marataízes: cidade de praia e gente batalhadora •</div>
      </div>
    </div>
  </div>

<script>
  // Parâmetros: ?msg=...  | ?size=44  | ?color=ffffff  | ?slug=NEWS  | ?speed=35
  const qs = new URLSearchParams(location.search);
  const rail = document.getElementById('rail');
  const a    = document.getElementById('a');
  const b    = document.getElementById('b');
  const slug = document.getElementById('slug');

  const size  = parseInt(qs.get('size')||'',10);
  const color = (qs.get('color')||'').replace('#','').trim();
  const tag   = (qs.get('slug') || 'NEWS').trim();
  const msg   = qs.get('msg');
  const speed = parseInt(qs.get('speed')||'',10);

  if(!Number.isNaN(size)&&size>12) document.documentElement.style.setProperty('--fs', size+'px');
  if(!Number.isNaN(speed)&&speed>4) document.documentElement.style.setProperty('--speed', speed+'s');
  if(color) rail.style.color = '#'+color;
  slug.textContent = tag || 'NEWS';

  if (msg){
    const text = decodeURIComponent(msg).trim();
    const content = text.endsWith('•') ? text : text + ' •';
    a.textContent = content;
    b.textContent = content;
    // Reinicia animação (OBS às vezes precisa)
    rail.style.animation='none'; rail.offsetHeight; rail.style.animation='';
  }
</script>
</body>
</html>
