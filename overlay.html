<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Overlay TV Marataízes</title>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<style>
  :root{
    --gn-red:#C4170C;
    --slug-dark:#B3130B;
    --top-bg:#2c2c2c; /* cinza topo */
    --white:#fff;
    --bar-h:92px;
    --fs:40px;
    --speed:30s;
  }

  html,body{
    margin:0;
    height:100%;
    background:transparent;
    color:var(--white);
    font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
  }

  /* TOPO */
  .topbar{
    position:fixed;
    top:0; left:0; right:0;
    height:56px;
    background:var(--top-bg);
    display:flex;
    align-items:center;
    gap:16px;
    padding:0 16px;
    box-shadow:0 6px 16px rgba(0,0,0,.25);
    z-index:3;
    pointer-events:none;
  }
  .topbar iframe{
    flex:1;
    height:36px;
    border:0;
    background:transparent;
  }
  .clock{
    flex:0 0 auto;
    display:flex;
    align-items:center;
    gap:10px;
    font-weight:700;
    letter-spacing:.2px;
    color:#e9f2ff;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .clock .time{ font-size:18px }
  .clock .date{ font-size:14px; opacity:.9 }

  /* RODAPÉ */
  .gnbar{
    position:fixed;
    left:0; right:0; bottom:0;
    height:var(--bar-h);
    background:var(--gn-red);
    display:flex;
    align-items:center;
    gap:18px;
    border-top:4px solid rgba(0,0,0,.18);
    box-shadow:0 -10px 28px rgba(0,0,0,.35);
    overflow:hidden;
    pointer-events:none;
    z-index:4;
  }
  .slug{
    margin-left:16px;
    background:var(--slug-dark);
    padding:12px 18px;
    border-radius:12px;
    font-weight:900;
    letter-spacing:.4px;
    text-transform:uppercase;
    white-space:nowrap;
  }
  .track{ position:relative; flex:1; height:100%; overflow:hidden }
  .rail{
    position:absolute; top:0; left:0; height:100%;
    display:flex; align-items:center; gap:42px;
    white-space:nowrap;
    font-weight:900; font-size:var(--fs); line-height:1.1;
    color:#fff;
    text-shadow:0 2px 0 rgba(0,0,0,.25);
    will-change:transform;
    animation:scroll var(--speed) linear infinite;
  }
  @keyframes scroll{ from{transform:translateX(0)} to{transform:translateX(-50%)} }
  .copy{ display:inline-block; padding-right:64px }

  @media (max-width:900px){
    :root{ --bar-h:74px; --fs:30px }
    .topbar{ height:52px }
    .topbar iframe{ height:32px }
    .clock .time{ font-size:16px }
    .clock .date{ font-size:12px }
  }
</style>
</head>
<body>

  <!-- TOPO -->
  <div class="topbar" aria-label="Clima e hora">
    <iframe src="https://www.meteoblue.com/en/weather/widget/daily/marataizes_brazil_3457819?geoloc=fixed&days=0&tempunit=CELSIUS&windunit=KILOMETER_PER_HOUR&precipunit=MILLIMETER&coloured=0&pictoicon=1&maxtemperature=1&mintemperature=1"
      frameborder="0" scrolling="no" allowtransparency="true"
      sandbox="allow-same-origin allow-scripts allow-popups allow-forms">
    </iframe>
    <div class="clock" aria-label="Relógio">
      <span class="time" id="clockTime">--:--</span>
      <span class="date" id="clockDate">--/--/----</span>
    </div>
  </div>

  <!-- RODAPÉ -->
  <div class="gnbar" role="marquee" aria-label="Rodapé de notícias">
    <div class="slug" id="slug">NEWS</div>
    <div class="track">
      <div class="rail" id="rail">
        <div class="copy" id="a">TV Marataízes ao vivo • Marataízes registra crescimento de 47,4% no número de empresas ativas - A Macuca Produções, sediada em Marataízes, é a 1ª a conquistar 3 projetos aprovados pela Lei Rouanet em cidades com menos de 100 mil habitantes no ES •</div>
        <div class="copy" id="b">TV Marataízes ao vivo • Marataízes registra crescimento de 47,4% no número de empresas ativas - A Macuca Produções, sediada em Marataízes, é a 1ª a conquistar 3 projetos aprovados pela Lei Rouanet em cidades com menos de 100 mil habitantes no ES •</div>
      </div>
    </div>
  </div>

<script>
  /* Relógio */
  function pad2(n){ return String(n).padStart(2,'0'); }
  function updClock(){
    const now = new Date();
    document.getElementById('clockTime').textContent = `${pad2(now.getHours())}:${pad2(now.getMinutes())}`;
    document.getElementById('clockDate').textContent = `${pad2(now.getDate())}/${pad2(now.getMonth()+1)}/${now.getFullYear()}`;
  }
  updClock(); setInterval(updClock, 1000);

  /* Parâmetros por URL */
  const qs = new URLSearchParams(location.search);
  const rail = document.getElementById('rail');
  const a    = document.getElementById('a');
  const b    = document.getElementById('b');
  const slug = document.getElementById('slug');

  const size  = parseInt(qs.get('size')||'',10);
  const color = (qs.get('color')||'').replace('#','').trim();
  const tag   = (qs.get('slug') || 'NEWS').trim();
  const msg   = qs.get('msg');
  const speed = parseInt(qs.get('speed')||'',10);

  if(!Number.isNaN(size)&&size>12) document.documentElement.style.setProperty('--fs', size+'px');
  if(!Number.isNaN(speed)&&speed>4) document.documentElement.style.setProperty('--speed', speed+'s');
  if(color) rail.style.color = '#'+color;
  slug.textContent = tag || 'NEWS';

  if (msg){
    const text = decodeURIComponent(msg).trim();
    const content = text.endsWith('•') ? text : text + ' •';
    a.textContent = content;
    b.textContent = content;
    rail.style.animation='none'; rail.offsetHeight; rail.style.animation='';
  }
</script>
</body>
</html>
