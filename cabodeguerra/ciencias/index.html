<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cabo de Guerra de Ci√™ncias - TV Marata√≠zes</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@700;900&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body {
  font-family:'Nunito',sans-serif;
  background:linear-gradient(135deg,#0d0520 0%,#12183a 60%,#0a2a50 100%);
  min-height:100vh; overflow:hidden;
  display:flex; flex-direction:column; align-items:center;
}
.header { width:100%; text-align:center; padding:10px 0 4px; position:relative; }
.header h1 { font-family:'Fredoka One',cursive; font-size:clamp(1.4rem,3vw,2.4rem); color:#FFD700; text-shadow:3px 3px 0 #ff6b00, 0 0 30px rgba(255,215,0,.5); letter-spacing:2px; }
.header .sub { font-size:.8rem; color:#888; letter-spacing:3px; text-transform:uppercase; }
.tv-badge { position:absolute; right:20px; top:8px; background:linear-gradient(135deg,#ff6b00,#ffd700); border-radius:50%; width:48px; height:48px; display:flex; align-items:center; justify-content:center; font-size:1.3rem; box-shadow:0 0 15px rgba(255,107,0,.6); }
.mute-btn { position:absolute; left:20px; top:8px; background:rgba(255,255,255,.1); border:1px solid rgba(255,255,255,.2); border-radius:50%; width:42px; height:42px; display:flex; align-items:center; justify-content:center; font-size:1.2rem; cursor:pointer; transition:all .2s; }
.mute-btn:hover { background:rgba(255,255,255,.2); }
.scoreboard { display:flex; align-items:center; gap:24px; background:rgba(255,255,255,.05); border-radius:50px; padding:8px 32px; border:1px solid rgba(255,255,255,.1); margin:4px 0; }
.score-team { font-family:'Fredoka One',cursive; font-size:1.5rem; display:flex; flex-direction:column; align-items:center; }
.score-team .lbl { font-size:.75rem; opacity:.6; font-family:'Nunito',sans-serif; }
.score-team.red .pts { color:#ff4757; }
.score-team.blue .pts { color:#1e90ff; }
.timer { font-family:'Fredoka One',cursive; font-size:1.3rem; color:#FFD700; min-width:70px; text-align:center; }
.game-area { display:flex; width:100%; max-width:1300px; padding:0 8px; gap:8px; flex:1; align-items:flex-start; justify-content:center; }
.team-panel { flex:0 0 260px; border-radius:20px; padding:12px; display:flex; flex-direction:column; align-items:center; gap:8px; }
.team-panel.red  { background:linear-gradient(160deg,rgba(220,30,60,.25),rgba(255,100,50,.12)); border:2px solid rgba(255,80,80,.4); }
.team-panel.blue { background:linear-gradient(160deg,rgba(30,100,220,.25),rgba(50,150,255,.12)); border:2px solid rgba(80,150,255,.4); }
.team-lbl { font-family:'Fredoka One',cursive; font-size:1.2rem; padding:4px 18px; border-radius:20px; letter-spacing:1px; }
.red  .team-lbl { background:#dc1e3c; color:#fff; box-shadow:0 4px 15px rgba(220,30,60,.5); }
.blue .team-lbl { background:#1e64dc; color:#fff; box-shadow:0 4px 15px rgba(30,100,220,.5); }
.question-box { width:100%; background:rgba(0,0,0,.3); border-radius:14px; padding:10px 12px; border:1px solid rgba(255,255,255,.1); min-height:64px; display:flex; align-items:center; justify-content:center; text-align:center; }
.question-box p { font-family:'Fredoka One',cursive; font-size:clamp(.95rem,1.5vw,1.15rem); color:#fff; line-height:1.3; }
.red  .question-box p { color:#ffb3b3; }
.blue .question-box p { color:#b3d4ff; }
.options-grid { display:flex; flex-direction:column; gap:6px; width:100%; }
.opt-btn {
  font-family:'Fredoka One',cursive;
  font-size:clamp(.85rem,1.3vw,1rem);
  padding:10px 14px;
  border-radius:12px;
  border:2px solid rgba(255,255,255,.2);
  background:rgba(255,255,255,.08);
  color:#fff;
  cursor:pointer;
  transition:all .15s;
  text-align:left;
  line-height:1.2;
}
.opt-btn:hover:not(:disabled) { transform:scale(1.02); background:rgba(255,255,255,.2); }
.opt-btn:active:not(:disabled) { transform:scale(.97); }
.opt-btn:disabled { opacity:.5; cursor:not-allowed; }
.opt-btn.selected-correct { background:rgba(46,204,113,.35)!important; border-color:#2ecc71!important; color:#2ecc71!important; }
.opt-btn.selected-wrong   { background:rgba(231,76,60,.35)!important;  border-color:#e74c3c!important; color:#e74c3c!important; }
.opt-btn.reveal-correct   { background:rgba(46,204,113,.2)!important;  border-color:#2ecc71!important; }
.arena { flex:1; display:flex; flex-direction:column; align-items:center; gap:6px; padding-top:8px; }
.rope-stage { width:100%; position:relative; height:230px; }
.rope-stage svg { width:100%; height:100%; overflow:visible; }
.feedback-zone { font-family:'Fredoka One',cursive; font-size:1.4rem; min-height:46px; text-align:center; }
.fb-correct { color:#2ecc71; animation:pop .5s ease; }
.fb-wrong   { color:#e74c3c; animation:shake .4s ease; }
@keyframes pop   { 0%{transform:scale(.5);opacity:0} 70%{transform:scale(1.2)} 100%{transform:scale(1);opacity:1} }
@keyframes shake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-8px)} 75%{transform:translateX(8px)} }
.progress-wrap { width:85%; height:20px; background:rgba(0,0,0,.35); border-radius:10px; overflow:hidden; border:1px solid rgba(255,255,255,.1); position:relative; }
.progress-fill { height:100%; width:50%; background:linear-gradient(90deg,#dc1e3c 0%,#ff8c00 50%,#1e64dc 100%); border-radius:10px; transition:width .6s cubic-bezier(.34,1.56,.64,1); }
.progress-mid { position:absolute; left:50%; top:0; width:3px; height:100%; background:#fff; opacity:.5; }
.progress-labels { display:flex; justify-content:space-between; width:85%; font-size:.7rem; color:rgba(255,255,255,.4); font-family:'Fredoka One',cursive; }
.round-lbl { color:rgba(255,255,255,.35); font-size:.75rem; }
.win-screen { display:none; position:fixed; inset:0; background:rgba(0,0,0,.88); z-index:100; flex-direction:column; align-items:center; justify-content:center; gap:20px; backdrop-filter:blur(10px); }
.win-screen.show { display:flex; animation:fadeIn .5s ease; }
.win-title { font-family:'Fredoka One',cursive; font-size:clamp(2.2rem,5vw,4.5rem); text-align:center; padding:0 20px; text-shadow:0 0 40px currentColor; }
.win-emoji { font-size:5rem; animation:bounce 1s infinite alternate; }
@keyframes bounce { from{transform:translateY(0)} to{transform:translateY(-20px)} }
.btn-restart { font-family:'Fredoka One',cursive; font-size:1.4rem; padding:15px 48px; background:linear-gradient(135deg,#FFD700,#ff6b00); border:none; border-radius:50px; color:#fff; cursor:pointer; box-shadow:0 8px 25px rgba(255,107,0,.5); transition:transform .2s; }
.btn-restart:hover { transform:scale(1.05); }
@keyframes fadeIn { from{opacity:0} to{opacity:1} }
.confetti-piece { position:fixed; width:10px; height:18px; border-radius:2px; animation:cfall linear forwards; pointer-events:none; z-index:200; }
@keyframes cfall { 0%{transform:translateY(-100px) rotate(0deg);opacity:1} 100%{transform:translateY(110vh) rotate(720deg);opacity:0} }
.start-screen { display:flex; position:fixed; inset:0; background:linear-gradient(135deg,#1a0a2e,#0f3460); z-index:100; flex-direction:column; align-items:center; justify-content:center; gap:18px; overflow-y:auto; padding:20px 0; }
.start-title { font-family:'Fredoka One',cursive; font-size:clamp(2rem,5vw,3.8rem); color:#FFD700; text-shadow:3px 3px 0 #ff6b00, 0 0 40px rgba(255,215,0,.6); text-align:center; line-height:1.1; padding:0 20px; }
.start-faces { display:flex; gap:20px; align-items:center; font-size:3.5rem; }
.start-vs { font-family:'Fredoka One',cursive; font-size:2rem; color:#fff; }
.cfg-box { background:rgba(255,255,255,.05); border-radius:20px; padding:18px 28px; border:1px solid rgba(255,255,255,.1); display:flex; flex-direction:column; gap:12px; align-items:center; }
.cfg-box label { color:#ccc; font-size:.85rem; text-align:center; }
.cfg-row { display:flex; gap:8px; flex-wrap:wrap; justify-content:center; }
.cfg-btn { font-family:'Fredoka One',cursive; font-size:.9rem; padding:7px 14px; border-radius:20px; border:2px solid rgba(255,255,255,.2); background:rgba(255,255,255,.07); color:#fff; cursor:pointer; transition:all .2s; }
.cfg-btn:hover,.cfg-btn.active { background:rgba(255,215,0,.25); border-color:#FFD700; color:#FFD700; }
.btn-start { font-family:'Fredoka One',cursive; font-size:1.7rem; padding:16px 56px; background:linear-gradient(135deg,#FFD700,#ff6b00); border:none; border-radius:50px; color:#fff; cursor:pointer; box-shadow:0 8px 30px rgba(255,107,0,.6); transition:transform .2s; }
.btn-start:hover { transform:scale(1.05); }
.powered { color:rgba(255,255,255,.25); font-size:.7rem; letter-spacing:2px; text-transform:uppercase; }
</style>
</head>
<body>

<!-- START SCREEN -->
<div class="start-screen" id="startScreen">
  <div class="start-title">üî¨ CABO DE GUERRA<br>DE CI√äNCIAS üß™</div>
  <div class="start-faces"><span>üî¨</span><div class="start-vs">VS</div><span>üß™</span></div>
  <div class="cfg-box">
    <label>üìö Categoria</label>
    <div class="cfg-row" id="catBtns">
      <button class="cfg-btn active" onclick="selCat('all',this)">üé≤ Todas</button>
      <button class="cfg-btn" onclick="selCat('corpo',this)">ü´Ä Corpo Humano</button>
      <button class="cfg-btn" onclick="selCat('natureza',this)">üåø Natureza</button>
      <button class="cfg-btn" onclick="selCat('fisica',this)">‚ö° F√≠sica e Qu√≠mica</button>
    </div>
    <label>üéØ Pontos para vencer</label>
    <div class="cfg-row" id="ptBtns">
      <button class="cfg-btn" onclick="selPts(3,this)">3 pts</button>
      <button class="cfg-btn active" onclick="selPts(5,this)">5 pts</button>
      <button class="cfg-btn" onclick="selPts(7,this)">7 pts</button>
    </div>
    <label>‚è±Ô∏è Tempo por rodada</label>
    <div class="cfg-row" id="timeBtns">
      <button class="cfg-btn" onclick="selTime(10,this)">10s</button>
      <button class="cfg-btn active" onclick="selTime(20,this)">20s</button>
      <button class="cfg-btn" onclick="selTime(30,this)">30s</button>
    </div>
  </div>
  <button class="btn-start" onclick="startGame()">üéÆ JOGAR!</button>
  <div class="powered">üì∫ TV Marata√≠zes ¬∑ Educa√ß√£o Gamificada</div>
</div>

<!-- WIN SCREEN -->
<div class="win-screen" id="winScreen">
  <div class="win-emoji">üî¨</div>
  <div class="win-title" id="winTitle">Venceu!</div>
  <button class="btn-restart" onclick="resetGame()">üîÑ Jogar Novamente</button>
</div>

<!-- HEADER -->
<div class="header">
  <button class="mute-btn" id="muteBtn" onclick="toggleMute()">üîä</button>
  <h1>üî¨ CABO DE GUERRA DE CI√äNCIAS üß™</h1>
  <div class="sub">TV Marata√≠zes ¬∑ Educa√ß√£o</div>
  <div class="tv-badge">üì∫</div>
</div>

<!-- SCOREBOARD -->
<div class="scoreboard">
  <div class="score-team red"><span class="lbl">üî¥ TIME VERMELHO</span><span class="pts" id="scoreRed">0</span></div>
  <div>
    <div class="timer" id="timerDisp">‚è± --</div>
    <div style="color:#aaa;font-size:.7rem;text-align:center" id="rdInfo">Rodada 1</div>
  </div>
  <div class="score-team blue"><span class="lbl">AZUL üîµ</span><span class="pts" id="scoreBlue">0</span></div>
</div>

<!-- GAME AREA -->
<div class="game-area">

  <!-- RED PANEL -->
  <div class="team-panel red">
    <div class="team-lbl">üî¥ TIME 1</div>
    <div class="question-box"><p id="qRed">?</p></div>
    <div class="options-grid" id="optsRed"></div>
  </div>

  <!-- ARENA -->
  <div class="arena">
    <div class="rope-stage">
      <svg id="stageSvg" viewBox="0 0 700 230" preserveAspectRatio="xMidYMid meet">
        <ellipse cx="350" cy="222" rx="320" ry="8" fill="rgba(0,0,0,.25)"/>
        <line id="ropeA"    x1="195" y1="138" x2="350" y2="138" stroke="#6B4515" stroke-width="10" stroke-linecap="round"/>
        <line id="ropeB"    x1="350" y1="138" x2="505" y2="138" stroke="#6B4515" stroke-width="10" stroke-linecap="round"/>
        <line id="ropeTex"  x1="195" y1="135" x2="505" y2="135" stroke="#A07840" stroke-width="3"  stroke-linecap="round" opacity=".5"/>
        <line id="ropeTex2" x1="195" y1="141" x2="505" y2="141" stroke="#3D2008" stroke-width="3"  stroke-linecap="round" opacity=".4"/>
        <line x1="350" y1="100" x2="350" y2="190" stroke="#FFD700" stroke-width="3" stroke-dasharray="7,5" opacity=".85"/>
        <rect x="344" y="96" width="12" height="8" fill="#FFD700" rx="2"/>
        <line x1="350" y1="96" x2="350" y2="80" stroke="#FFD700" stroke-width="2.5"/>
        <g id="knotG" transform="translate(0,0)">
          <circle cx="350" cy="138" r="13" fill="#3D2008" stroke="#6B4515" stroke-width="2.5"/>
          <circle cx="350" cy="138" r="8"  fill="#6B4515"/>
          <circle cx="350" cy="138" r="4"  fill="#A07840"/>
        </g>
        <!-- CIENTISTA VERMELHO -->
        <g id="charRed" transform="translate(90, 50)">
          <g id="leanRed" style="transform-origin:55px 155px; transform:rotate(0deg)">
            <line x1="32" y1="105" x2="6"   y2="88" stroke="#27ae60" stroke-width="10" stroke-linecap="round"/>
            <line x1="78" y1="105" x2="105" y2="88" stroke="#27ae60" stroke-width="10" stroke-linecap="round"/>
            <circle cx="105" cy="88" r="9" fill="#1e8449" stroke="#145a32" stroke-width="2"/>
            <ellipse cx="55" cy="108" rx="32" ry="35" fill="#DC1E3C" stroke="#a0001e" stroke-width="2"/>
            <ellipse cx="55" cy="108" rx="32" ry="35" fill="none" stroke="rgba(255,255,255,.5)" stroke-width="2"/>
            <line x1="55" y1="73" x2="55" y2="143" stroke="rgba(255,255,255,.4)" stroke-width="2"/>
            <rect x="60" y="100" width="14" height="12" rx="3" fill="none" stroke="rgba(255,255,255,.5)" stroke-width="1.5"/>
            <rect x="64" y="97" width="4" height="10" rx="2" fill="#3498db" stroke="rgba(255,255,255,.6)" stroke-width="1"/>
            <circle cx="42" cy="89" r="10" fill="white"/>
            <circle cx="68" cy="89" r="10" fill="white"/>
            <circle cx="44" cy="89" r="5.5" fill="#3D1F00"/>
            <circle cx="70" cy="89" r="5.5" fill="#3D1F00"/>
            <circle cx="45" cy="87" r="2.2" fill="white"/>
            <circle cx="71" cy="87" r="2.2" fill="white"/>
            <rect x="32" y="80" width="20" height="18" rx="8" fill="none" stroke="#3D1F00" stroke-width="3"/>
            <rect x="58" y="80" width="20" height="18" rx="8" fill="none" stroke="#3D1F00" stroke-width="3"/>
            <line x1="52" y1="89" x2="58" y2="89" stroke="#3D1F00" stroke-width="2.5"/>
            <line x1="32" y1="89" x2="26" y2="88" stroke="#3D1F00" stroke-width="2.5"/>
            <line x1="78" y1="89" x2="84" y2="88" stroke="#3D1F00" stroke-width="2.5"/>
            <path d="M 43 105 Q 55 113 67 105" fill="none" stroke="#3D1F00" stroke-width="3" stroke-linecap="round"/>
            <ellipse cx="55" cy="68" rx="20" ry="6" fill="#e74c3c"/>
            <path d="M35 68 Q37 52 55 48 Q73 52 75 68" fill="#c0392b" stroke="#922b21" stroke-width="1"/>
            <rect x="34" y="82" width="14" height="10" rx="4" fill="rgba(100,200,255,.3)" stroke="#3498db" stroke-width="2"/>
            <rect x="52" y="82" width="14" height="10" rx="4" fill="rgba(100,200,255,.3)" stroke="#3498db" stroke-width="2"/>
            <line x1="48" y1="87" x2="52" y2="87" stroke="#3498db" stroke-width="2"/>
            <line x1="34" y1="87" x2="28" y2="86" stroke="#3498db" stroke-width="2"/>
            <line x1="66" y1="87" x2="72" y2="86" stroke="#3498db" stroke-width="2"/>
            <rect x="40" y="140" width="12" height="20" rx="5" fill="#27ae60"/>
            <rect x="58" y="140" width="12" height="20" rx="5" fill="#27ae60"/>
            <ellipse cx="46" cy="161" rx="11" ry="6" fill="#1e8449"/>
            <ellipse cx="64" cy="161" rx="11" ry="6" fill="#1e8449"/>
          </g>
        </g>
        <!-- CIENTISTA AZUL -->
        <g id="charBlue" transform="translate(560,50) scale(-1,1) translate(-110,0)">
          <g id="leanBlue" style="transform-origin:55px 155px; transform:rotate(0deg)">
            <line x1="32" y1="105" x2="6"   y2="88" stroke="#8e44ad" stroke-width="10" stroke-linecap="round"/>
            <line x1="78" y1="105" x2="105" y2="88" stroke="#8e44ad" stroke-width="10" stroke-linecap="round"/>
            <circle cx="105" cy="88" r="9" fill="#6c3483" stroke="#4a235a" stroke-width="2"/>
            <ellipse cx="55" cy="108" rx="32" ry="35" fill="#1E64DC" stroke="#0d3da0" stroke-width="2"/>
            <ellipse cx="55" cy="108" rx="32" ry="35" fill="none" stroke="rgba(255,255,255,.5)" stroke-width="2"/>
            <line x1="55" y1="73" x2="55" y2="143" stroke="rgba(255,255,255,.4)" stroke-width="2"/>
            <rect x="60" y="100" width="14" height="12" rx="3" fill="none" stroke="rgba(255,255,255,.5)" stroke-width="1.5"/>
            <rect x="64" y="97" width="4" height="10" rx="2" fill="#e74c3c" stroke="rgba(255,255,255,.6)" stroke-width="1"/>
            <circle cx="42" cy="89" r="10" fill="white"/>
            <circle cx="68" cy="89" r="10" fill="white"/>
            <circle cx="44" cy="89" r="5.5" fill="#3D1F00"/>
            <circle cx="70" cy="89" r="5.5" fill="#3D1F00"/>
            <circle cx="45" cy="87" r="2.2" fill="white"/>
            <circle cx="71" cy="87" r="2.2" fill="white"/>
            <rect x="32" y="80" width="20" height="18" rx="8" fill="none" stroke="#3D1F00" stroke-width="3"/>
            <rect x="58" y="80" width="20" height="18" rx="8" fill="none" stroke="#3D1F00" stroke-width="3"/>
            <line x1="52" y1="89" x2="58" y2="89" stroke="#3D1F00" stroke-width="2.5"/>
            <line x1="32" y1="89" x2="26" y2="88" stroke="#3D1F00" stroke-width="2.5"/>
            <line x1="78" y1="89" x2="84" y2="88" stroke="#3D1F00" stroke-width="2.5"/>
            <path d="M 43 105 Q 55 113 67 105" fill="none" stroke="#3D1F00" stroke-width="3" stroke-linecap="round"/>
            <ellipse cx="55" cy="68" rx="20" ry="6" fill="#2980b9"/>
            <path d="M35 68 Q37 52 55 48 Q73 52 75 68" fill="#1a5276" stroke="#154360" stroke-width="1"/>
            <rect x="34" y="82" width="14" height="10" rx="4" fill="rgba(255,200,100,.3)" stroke="#f39c12" stroke-width="2"/>
            <rect x="52" y="82" width="14" height="10" rx="4" fill="rgba(255,200,100,.3)" stroke="#f39c12" stroke-width="2"/>
            <line x1="48" y1="87" x2="52" y2="87" stroke="#f39c12" stroke-width="2"/>
            <line x1="34" y1="87" x2="28" y2="86" stroke="#f39c12" stroke-width="2"/>
            <line x1="66" y1="87" x2="72" y2="86" stroke="#f39c12" stroke-width="2"/>
            <rect x="40" y="140" width="12" height="20" rx="5" fill="#8e44ad"/>
            <rect x="58" y="140" width="12" height="20" rx="5" fill="#8e44ad"/>
            <ellipse cx="46" cy="161" rx="11" ry="6" fill="#6c3483"/>
            <ellipse cx="64" cy="161" rx="11" ry="6" fill="#6c3483"/>
          </g>
        </g>
      </svg>
    </div>
    <div class="progress-labels"><span>üî¥</span><span>üîµ</span></div>
    <div class="progress-wrap">
      <div class="progress-fill" id="progFill"></div>
      <div class="progress-mid"></div>
    </div>
    <div class="feedback-zone" id="fbZone"></div>
    <div class="round-lbl" id="centerLbl">Escolha a resposta!</div>
  </div>

  <!-- BLUE PANEL -->
  <div class="team-panel blue">
    <div class="team-lbl">AZUL üîµ</div>
    <div class="question-box"><p id="qBlue">?</p></div>
    <div class="options-grid" id="optsBlue"></div>
  </div>

</div>

<script>
const QUESTIONS = {
  corpo: [
    { q:"Qual √≥rg√£o bombeia o sangue pelo corpo?", a:"Cora√ß√£o", opts:["Pulm√£o","F√≠gado","Cora√ß√£o","Rim"] },
    { q:"Quantos ossos tem o corpo humano adulto?", a:"206", opts:["106","206","306","406"] },
    { q:"Qual √© o maior √≥rg√£o do corpo humano?", a:"Pele", opts:["F√≠gado","Intestino","Pele","Est√¥mago"] },
    { q:"Onde ocorre a digest√£o dos alimentos?", a:"Est√¥mago e intestino", opts:["Es√¥fago","Est√¥mago e intestino","F√≠gado","P√¢ncreas"] },
    { q:"Qual sentido √© respons√°vel pelo equil√≠brio?", a:"Ouvido", opts:["Vis√£o","Tato","Olfato","Ouvido"] },
    { q:"Qual √≥rg√£o filtra o sangue e produz urina?", a:"Rim", opts:["F√≠gado","Bexiga","Rim","Ba√ßo"] },
    { q:"Quantas c√¢maras tem o cora√ß√£o humano?", a:"4", opts:["2","3","4","5"] },
    { q:"Qual √© a fun√ß√£o dos pulm√µes?", a:"Respira√ß√£o", opts:["Digest√£o","Respira√ß√£o","Circula√ß√£o","Excre√ß√£o"] },
    { q:"Como se chama o l√≠quido vermelho que circula pelo corpo?", a:"Sangue", opts:["Plasma","Linfa","Sangue","Soro"] },
    { q:"Qual parte do olho controla a entrada de luz?", a:"Pupila", opts:["Retina","C√≥rnea","Pupila","√çris"] },
    { q:"Qual vitamina √© produzida quando tomamos sol?", a:"Vitamina D", opts:["Vitamina A","Vitamina C","Vitamina B","Vitamina D"] },
    { q:"Qual √© o maior m√∫sculo do corpo humano?", a:"Gl√∫teo m√°ximo", opts:["B√≠ceps","Quadr√≠ceps","Gl√∫teo m√°ximo","Trap√©zio"] },
    { q:"Onde fica o c√©rebro?", a:"Cr√¢nio", opts:["T√≥rax","Abd√¥men","Cr√¢nio","Pelve"] },
    { q:"Qual √© a fun√ß√£o dos gl√≥bulos vermelhos?", a:"Transportar oxig√™nio", opts:["Defender o organismo","Coagular o sangue","Transportar oxig√™nio","Produzir horm√¥nios"] },
    { q:"Quantos dentes tem um adulto completo?", a:"32", opts:["28","30","32","34"] },
    { q:"Qual √≥rg√£o produz a bile?", a:"F√≠gado", opts:["P√¢ncreas","Rim","F√≠gado","Ba√ßo"] },
    { q:"Como se chama o tubo que leva o ar at√© os pulm√µes?", a:"Traqueia", opts:["Es√¥fago","Faringe","Traqueia","Laringe"] },
    { q:"Qual sistema √© respons√°vel pelos movimentos do corpo?", a:"Sistema muscular", opts:["Sistema nervoso","Sistema muscular","Sistema digest√≥rio","Sistema circulat√≥rio"] },
    { q:"Onde s√£o produzidos os gl√≥bulos sangu√≠neos?", a:"Medula √≥ssea", opts:["Ba√ßo","Linfonodo","Medula √≥ssea","Timo"] },
    { q:"Qual horm√¥nio controla o a√ß√∫car no sangue?", a:"Insulina", opts:["Adrenalina","Cortisol","Insulina","Testosterona"] },
  ],
  natureza: [
    { q:"Qual processo as plantas usam para produzir alimento?", a:"Fotoss√≠ntese", opts:["Respira√ß√£o","Fotoss√≠ntese","Fermenta√ß√£o","Digest√£o"] },
    { q:"O que os animais herb√≠voros comem?", a:"Plantas", opts:["Carne","Plantas","Insetos","Peixes"] },
    { q:"Como se chama o processo de uma lagarta virar borboleta?", a:"Metamorfose", opts:["Evolu√ß√£o","Metamorfose","Muta√ß√£o","Adapta√ß√£o"] },
    { q:"Qual √© a principal fonte de energia para a vida na Terra?", a:"Sol", opts:["Vento","√Ågua","Solo","Sol"] },
    { q:"O que √© um ecossistema?", a:"Conjunto de seres vivos e ambiente", opts:["Tipo de planta","Conjunto de seres vivos e ambiente","Esp√©cie animal","Tipo de solo"] },
    { q:"Como se chama a camada de ar que envolve a Terra?", a:"Atmosfera", opts:["Hidrosfera","Litosfera","Biosfera","Atmosfera"] },
    { q:"O que os fungos fazem com mat√©ria org√¢nica morta?", a:"Decomp√µem", opts:["Fotossintetizam","Decomp√µem","Predatam","Parasitam"] },
    { q:"Qual g√°s as plantas absorvem para fazer fotoss√≠ntese?", a:"Di√≥xido de carbono", opts:["Oxig√™nio","Nitrog√™nio","Di√≥xido de carbono","Hidrog√™nio"] },
    { q:"Como se chama a rela√ß√£o onde dois seres se beneficiam?", a:"Mutualismo", opts:["Parasitismo","Comensalismo","Mutualismo","Predatismo"] },
    { q:"Qual √© o principal g√°s liberado pelas plantas durante o dia?", a:"Oxig√™nio", opts:["CO2","Nitrog√™nio","Oxig√™nio","Vapor d'√°gua"] },
    { q:"O que √© uma cadeia alimentar?", a:"Sequ√™ncia de quem come quem", opts:["Lista de animais","Tipo de ecossistema","Sequ√™ncia de quem come quem","Mapa de habitats"] },
    { q:"Como se chama o ciclo da √°gua na natureza?", a:"Ciclo hidrol√≥gico", opts:["Ciclo do carbono","Ciclo hidrol√≥gico","Ciclo do nitrog√™nio","Ciclo solar"] },
    { q:"Qual reino inclui cogumelos e bolores?", a:"Fungi", opts:["Plantae","Animalia","Fungi","Protista"] },
    { q:"O que √© biodiversidade?", a:"Variedade de esp√©cies vivas", opts:["Tipo de bioma","Variedade de esp√©cies vivas","Estudo dos f√≥sseis","Tipo de solo"] },
    { q:"Como se chama o fen√¥meno do aquecimento global causado por gases?", a:"Efeito estufa", opts:["Chuva √°cida","Invers√£o t√©rmica","Efeito estufa","El Ni√±o"] },
    { q:"Qual √© o bioma com maior biodiversidade do Brasil?", a:"Amaz√¥nia", opts:["Cerrado","Caatinga","Amaz√¥nia","Mata Atl√¢ntica"] },
    { q:"O que s√£o animais vertebrados?", a:"Animais com coluna vertebral", opts:["Animais com exoesqueleto","Animais com coluna vertebral","Animais aqu√°ticos","Animais carn√≠voros"] },
    { q:"Como se chama o processo de perda de √°gua pelas folhas?", a:"Transpira√ß√£o", opts:["Evapora√ß√£o","Transpira√ß√£o","Absor√ß√£o","Difus√£o"] },
    { q:"Qual √≥rg√£o as plantas usam para realizar fotoss√≠ntese?", a:"Folhas", opts:["Raiz","Caule","Folhas","Flor"] },
    { q:"O que √© um ser aut√≥trofo?", a:"Produz seu pr√≥prio alimento", opts:["Come outros animais","Produz seu pr√≥prio alimento","Decomp√µe mat√©ria","Parasita outros seres"] },
  ],
  fisica: [
    { q:"Qual √© o s√≠mbolo qu√≠mico da √°gua?", a:"H‚ÇÇO", opts:["HO","H‚ÇÇO","O‚ÇÇH","H‚ÇÇO‚ÇÇ"] },
    { q:"Qual √© o s√≠mbolo qu√≠mico do ouro?", a:"Au", opts:["Or","Go","Au","Ag"] },
    { q:"O que √© a gravidade?", a:"For√ßa de atra√ß√£o entre massas", opts:["Tipo de energia","For√ßa de atra√ß√£o entre massas","Propriedade magn√©tica","Tipo de onda"] },
    { q:"Quantos estados f√≠sicos da mat√©ria existem?", a:"3 (s√≥lido, l√≠quido, gasoso)", opts:["2","3 (s√≥lido, l√≠quido, gasoso)","4","5"] },
    { q:"Qual √© a unidade de medida de temperatura no SI?", a:"Kelvin", opts:["Celsius","Fahrenheit","Kelvin","Rankine"] },
    { q:"O que √© energia cin√©tica?", a:"Energia do movimento", opts:["Energia armazenada","Energia do movimento","Energia t√©rmica","Energia el√©trica"] },
    { q:"Qual √© o s√≠mbolo qu√≠mico do ferro?", a:"Fe", opts:["Fr","Ir","Fe","Fi"] },
    { q:"Como se chama a mudan√ßa de s√≥lido para l√≠quido?", a:"Fus√£o", opts:["Solidifica√ß√£o","Evapora√ß√£o","Fus√£o","Condensa√ß√£o"] },
    { q:"Qual part√≠cula tem carga negativa?", a:"El√©tron", opts:["Pr√≥ton","N√™utron","El√©tron","F√≥ton"] },
    { q:"O que √© pH?", a:"Medida de acidez ou basicidade", opts:["Press√£o hidr√°ulica","Medida de acidez ou basicidade","Potencial el√©trico","Tipo de rea√ß√£o"] },
    { q:"Qual √© a f√≥rmula do g√°s carb√¥nico?", a:"CO‚ÇÇ", opts:["CO","CO‚ÇÇ","C‚ÇÇO","CO‚ÇÉ"] },
    { q:"O que s√£o √°tomos?", a:"Menores unidades da mat√©ria", opts:["Tipo de mol√©cula","Menores unidades da mat√©ria","Part√≠culas de luz","Tipo de c√©lula"] },
    { q:"Qual √© o s√≠mbolo qu√≠mico do s√≥dio?", a:"Na", opts:["So","Sd","Na","Sn"] },
    { q:"Como se chama a mudan√ßa de l√≠quido para g√°s?", a:"Evapora√ß√£o", opts:["Fus√£o","Condensa√ß√£o","Evapora√ß√£o","Sublima√ß√£o"] },
    { q:"O que √© uma rea√ß√£o qu√≠mica?", a:"Transforma√ß√£o de subst√¢ncias", opts:["Mistura f√≠sica","Transforma√ß√£o de subst√¢ncias","Mudan√ßa de estado","Dissolu√ß√£o"] },
    { q:"Qual cor tem maior comprimento de onda na luz vis√≠vel?", a:"Vermelho", opts:["Violeta","Azul","Verde","Vermelho"] },
    { q:"O que √© densidade?", a:"Massa dividida pelo volume", opts:["Peso de um objeto","Massa dividida pelo volume","Tamanho de um objeto","For√ßa gravitacional"] },
    { q:"Qual √© o s√≠mbolo qu√≠mico do oxig√™nio?", a:"O", opts:["Ox","Og","O","Oz"] },
    { q:"Como se chama a for√ßa que resiste ao movimento?", a:"Atrito", opts:["Gravidade","Tens√£o","Atrito","Press√£o"] },
    { q:"O que √© um elemento qu√≠mico?", a:"Subst√¢ncia formada por um s√≥ tipo de √°tomo", opts:["Mistura de subst√¢ncias","Subst√¢ncia formada por um s√≥ tipo de √°tomo","Tipo de mol√©cula","Composto i√¥nico"] },
  ]
};

function buildPool(cat) {
  let arr = [];
  if (cat === 'all') { Object.values(QUESTIONS).forEach(v => arr = arr.concat(v)); }
  else { arr = [...QUESTIONS[cat]]; }
  return shuffle(arr);
}
function shuffle(a) {
  const b = [...a];
  for (let i = b.length-1; i > 0; i--) { const j = Math.floor(Math.random()*(i+1)); [b[i],b[j]]=[b[j],b[i]]; }
  return b;
}

let audioCtx = null, muted = false;
function getCtx() { if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)(); return audioCtx; }
function toggleMute() { muted = !muted; document.getElementById('muteBtn').textContent = muted ? 'üîá' : 'üîä'; }
function playTone(freq, type, duration, volume, freqEnd) {
  if (muted) return;
  try {
    const ctx = getCtx(), osc = ctx.createOscillator(), gain = ctx.createGain();
    osc.connect(gain); gain.connect(ctx.destination);
    osc.type = type;
    osc.frequency.setValueAtTime(freq, ctx.currentTime);
    if (freqEnd) osc.frequency.linearRampToValueAtTime(freqEnd, ctx.currentTime + duration);
    gain.gain.setValueAtTime(volume, ctx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + duration);
    osc.start(ctx.currentTime); osc.stop(ctx.currentTime + duration);
  } catch(e) {}
}
function sfxCorrect() { playTone(520,'sine',.12,.4); setTimeout(()=>playTone(660,'sine',.12,.4),110); setTimeout(()=>playTone(880,'sine',.2,.4),220); }
function sfxWrong() { playTone(220,'sawtooth',.08,.3,140); setTimeout(()=>playTone(140,'sawtooth',.15,.25,100),80); }
function sfxPull() { playTone(180,'sine',.18,.25,80); playTone(300,'triangle',.18,.15,120); }
function sfxTick() { playTone(880,'square',.06,.18); }
function sfxNewRound() { playTone(440,'sine',.1,.25); setTimeout(()=>playTone(550,'sine',.12,.25),130); }
function sfxVictory() {
  const notes=[523,659,784,1047];
  notes.forEach((f,i)=>setTimeout(()=>playTone(f,'sine',.18,.4),i*140));
  setTimeout(()=>{ playTone(784,'sine',.1,.3); setTimeout(()=>playTone(1047,'sine',.35,.5),120); },notes.length*140);
}
function sfxClick() { playTone(600,'sine',.05,.15); }

const G = {
  cat:'all', maxPts:5, roundTime:20,
  scoreRed:0, scoreBlue:0, ropePos:350, round:1,
  pool:[], usedIdx:new Set(),
  qRed:null, qBlue:null, ansRed:null, ansBlue:null,
  lockRed:false, lockBlue:false,
  active:false, timer:null, timeLeft:20, rafId:null,
};

function selCat(c,b){ G.cat=c; tog('#catBtns',b); }
function selPts(p,b){ G.maxPts=p; tog('#ptBtns',b); }
function selTime(t,b){ G.roundTime=t; tog('#timeBtns',b); }
function tog(sel,btn){ document.querySelectorAll(sel+' .cfg-btn').forEach(x=>x.classList.remove('active')); btn.classList.add('active'); }

const ROPE_LEFT=150, ROPE_RIGHT=550, ROPE_MID=350;

function updateVisual(kx) {
  document.getElementById('knotG').setAttribute('transform',`translate(${kx-350},0)`);
  const slide=(kx-ROPE_MID)*0.32;
  document.getElementById('charRed').setAttribute('transform',`translate(${90+slide}, 50)`);
  document.getElementById('charBlue').setAttribute('transform',`translate(${560+slide}, 50) scale(-1,1) translate(-110,0)`);
  const rHX=195+slide, bHX=565+slide;
  document.getElementById('ropeA').setAttribute('x1',rHX); document.getElementById('ropeA').setAttribute('x2',kx);
  document.getElementById('ropeB').setAttribute('x1',kx);  document.getElementById('ropeB').setAttribute('x2',bHX);
  document.getElementById('ropeTex').setAttribute('x1',rHX);  document.getElementById('ropeTex').setAttribute('x2',bHX);
  document.getElementById('ropeTex2').setAttribute('x1',rHX); document.getElementById('ropeTex2').setAttribute('x2',bHX);
  const off=kx-ROPE_MID;
  document.getElementById('leanRed').style.transform=`rotate(${Math.max(-18,Math.min(22,off*.09))}deg)`;
  document.getElementById('leanBlue').style.transform=`rotate(${Math.max(-18,Math.min(22,-off*.09))}deg)`;
  document.getElementById('progFill').style.width=Math.max(0,Math.min(100,((kx-ROPE_LEFT)/(ROPE_RIGHT-ROPE_LEFT))*100))+'%';
}

function animateTo(target, onDone) {
  cancelAnimationFrame(G.rafId);
  const from=G.ropePos, dist=target-from, dur=1000, t0=performance.now();
  function step(now) {
    const p=Math.min(1,(now-t0)/dur), e=1-Math.pow(1-p,3);
    G.ropePos=from+dist*e; updateVisual(G.ropePos);
    if(p<1) G.rafId=requestAnimationFrame(step);
    else { G.ropePos=target; if(onDone) onDone(); }
  }
  G.rafId=requestAnimationFrame(step);
}

let swayPhase=0;
function swayLoop() { if(!G.active){ swayPhase+=0.025; updateVisual(G.ropePos+Math.sin(swayPhase)*3); } requestAnimationFrame(swayLoop); }
swayLoop();

function pickQ() {
  if (G.pool.length===0||G.usedIdx.size>=G.pool.length){ G.pool=buildPool(G.cat); G.usedIdx.clear(); }
  let idx; do { idx=Math.floor(Math.random()*G.pool.length); } while(G.usedIdx.has(idx));
  G.usedIdx.add(idx); return G.pool[idx];
}

function renderOpts(team, qObj) {
  const container=document.getElementById('opts'+cap(team));
  container.innerHTML='';
  shuffle(qObj.opts).forEach(opt => {
    const btn=document.createElement('button');
    btn.className='opt-btn'; btn.textContent=opt;
    btn.onclick=()=>chooseAnswer(team,opt,qObj.a,btn);
    container.appendChild(btn);
  });
}

function chooseAnswer(team, chosen, correct, btn) {
  if(!G.active) return;
  if(team==='red'&&G.lockRed) return;
  if(team==='blue'&&G.lockBlue) return;
  sfxClick();
  if(team==='red'){ G.ansRed=chosen; G.lockRed=true; } else { G.ansBlue=chosen; G.lockBlue=true; }
  const isCorrect=chosen===correct;
  btn.classList.add(isCorrect?'selected-correct':'selected-wrong');
  if(!isCorrect){ document.getElementById('opts'+cap(team)).querySelectorAll('.opt-btn').forEach(b=>{ if(b.textContent===correct) b.classList.add('reveal-correct'); }); }
  document.getElementById('opts'+cap(team)).querySelectorAll('.opt-btn').forEach(b=>b.disabled=true);
  if(G.lockRed&&G.lockBlue){ clearInterval(G.timer); endRound(); }
}

function startGame() {
  getCtx(); G.pool=buildPool(G.cat); G.usedIdx.clear();
  document.getElementById('startScreen').style.display='none';
  newRound();
}

function newRound() {
  G.qRed=pickQ(); G.qBlue=pickQ();
  let t=0; while(G.qBlue.q===G.qRed.q&&t++<20) G.qBlue=pickQ();
  G.ansRed=null; G.ansBlue=null; G.lockRed=false; G.lockBlue=false;
  G.active=true; G.timeLeft=G.roundTime;
  document.getElementById('qRed').textContent=G.qRed.q;
  document.getElementById('qBlue').textContent=G.qBlue.q;
  renderOpts('red',G.qRed); renderOpts('blue',G.qBlue);
  document.getElementById('fbZone').textContent='';
  document.getElementById('fbZone').className='feedback-zone';
  document.getElementById('centerLbl').textContent=`Rodada ${G.round}`;
  document.getElementById('rdInfo').textContent=`Rodada ${G.round}`;
  clearInterval(G.timer); updTimer(); sfxNewRound();
  G.timer=setInterval(()=>{ G.timeLeft--; updTimer(); if(G.timeLeft<=5&&G.timeLeft>0) sfxTick(); if(G.timeLeft<=0){ clearInterval(G.timer); endRound(); } },1000);
}

function updTimer() { document.getElementById('timerDisp').textContent=`‚è± ${G.timeLeft}s`; }
function cap(s) { return s.charAt(0).toUpperCase()+s.slice(1); }

function endRound() {
  G.active=false; clearInterval(G.timer);
  const rOk=G.ansRed===G.qRed.a, bOk=G.ansBlue===G.qBlue.a;
  if(!G.lockRed)  document.getElementById('optsRed').querySelectorAll('.opt-btn').forEach(b=>{ b.disabled=true; if(b.textContent===G.qRed.a) b.classList.add('reveal-correct'); });
  if(!G.lockBlue) document.getElementById('optsBlue').querySelectorAll('.opt-btn').forEach(b=>{ b.disabled=true; if(b.textContent===G.qBlue.a) b.classList.add('reveal-correct'); });
  const fbEl=document.getElementById('fbZone');
  let shift=0, fb='';
  if(rOk&&!bOk){ shift=-55; G.scoreRed++; fb='üî¨ Vermelho acertou! üí™ Puxa!'; fbEl.className='feedback-zone fb-correct'; sfxCorrect(); setTimeout(sfxPull,300); }
  else if(bOk&&!rOk){ shift=+55; G.scoreBlue++; fb='üß™ Azul acertou! üí™ Puxa!'; fbEl.className='feedback-zone fb-correct'; sfxCorrect(); setTimeout(sfxPull,300); }
  else if(rOk&&bOk){ fb='üéØ Empate! Os dois acertaram!'; fbEl.className='feedback-zone fb-correct'; sfxCorrect(); }
  else { fb='üòÖ Ningu√©m acertou! Pr√≥xima rodada...'; fbEl.className='feedback-zone fb-wrong'; sfxWrong(); }
  fbEl.textContent=fb;
  document.getElementById('scoreRed').textContent=G.scoreRed;
  document.getElementById('scoreBlue').textContent=G.scoreBlue;
  const newPos=Math.max(ROPE_LEFT,Math.min(ROPE_RIGHT,G.ropePos+shift));
  animateTo(newPos,()=>{
    if(G.scoreRed>=G.maxPts||newPos<=ROPE_LEFT+10){ setTimeout(()=>showWin('red'),400); return; }
    if(G.scoreBlue>=G.maxPts||newPos>=ROPE_RIGHT-10){ setTimeout(()=>showWin('blue'),400); return; }
    G.round++; setTimeout(newRound,2500);
  });
}

function showWin(t) {
  const isRed=t==='red';
  document.getElementById('winTitle').textContent=isRed?'üî¥ TIME VERMELHO VENCEU! üéâ':'üîµ TIME AZUL VENCEU! üéâ';
  document.getElementById('winTitle').style.color=isRed?'#ff6b6b':'#6bb3ff';
  document.getElementById('winScreen').classList.add('show');
  sfxVictory(); confetti();
}

function resetGame() {
  G.scoreRed=0; G.scoreBlue=0; G.ropePos=ROPE_MID; G.round=1; G.usedIdx.clear();
  clearInterval(G.timer); cancelAnimationFrame(G.rafId);
  document.getElementById('winScreen').classList.remove('show');
  document.getElementById('scoreRed').textContent='0';
  document.getElementById('scoreBlue').textContent='0';
  updateVisual(ROPE_MID);
  document.getElementById('startScreen').style.display='flex';
}

function confetti() {
  const cols=['#FFD700','#ff4757','#1e90ff','#2ecc71','#ff6b81','#eccc68'];
  for(let i=0;i<80;i++){
    const el=document.createElement('div');
    el.className='confetti-piece';
    el.style.left=Math.random()*100+'vw';
    el.style.background=cols[Math.floor(Math.random()*cols.length)];
    el.style.animationDuration=(1.5+Math.random()*2.5)+'s';
    el.style.animationDelay=Math.random()+'s';
    el.style.width=(6+Math.random()*8)+'px';
    el.style.height=(10+Math.random()*14)+'px';
    el.style.transform=`rotate(${Math.random()*360}deg)`;
    document.body.appendChild(el);
    setTimeout(()=>el.remove(),4500);
  }
}

updateVisual(ROPE_MID);
</script>
</body>
</html>
