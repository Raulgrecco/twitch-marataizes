<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cabo de Guerra de Geografia - TV Marata√≠zes</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@700;900&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body {
  font-family:'Nunito',sans-serif;
  background:linear-gradient(135deg,#0d0520 0%,#12183a 60%,#0a2a50 100%);
  min-height:100vh; overflow:hidden;
  display:flex; flex-direction:column; align-items:center;
}
.header { width:100%; text-align:center; padding:10px 0 4px; position:relative; }
.header h1 { font-family:'Fredoka One',cursive; font-size:clamp(1.4rem,3vw,2.4rem); color:#FFD700; text-shadow:3px 3px 0 #ff6b00, 0 0 30px rgba(255,215,0,.5); letter-spacing:2px; }
.header .sub { font-size:.8rem; color:#888; letter-spacing:3px; text-transform:uppercase; }
.tv-badge { position:absolute; right:20px; top:8px; background:linear-gradient(135deg,#ff6b00,#ffd700); border-radius:50%; width:48px; height:48px; display:flex; align-items:center; justify-content:center; font-size:1.3rem; box-shadow:0 0 15px rgba(255,107,0,.6); }
.mute-btn { position:absolute; left:20px; top:8px; background:rgba(255,255,255,.1); border:1px solid rgba(255,255,255,.2); border-radius:50%; width:42px; height:42px; display:flex; align-items:center; justify-content:center; font-size:1.2rem; cursor:pointer; transition:all .2s; }
.mute-btn:hover { background:rgba(255,255,255,.2); }
.scoreboard { display:flex; align-items:center; gap:24px; background:rgba(255,255,255,.05); border-radius:50px; padding:8px 32px; border:1px solid rgba(255,255,255,.1); margin:4px 0; }
.score-team { font-family:'Fredoka One',cursive; font-size:1.5rem; display:flex; flex-direction:column; align-items:center; }
.score-team .lbl { font-size:.75rem; opacity:.6; font-family:'Nunito',sans-serif; }
.score-team.red .pts { color:#ff4757; }
.score-team.blue .pts { color:#1e90ff; }
.timer { font-family:'Fredoka One',cursive; font-size:1.3rem; color:#FFD700; min-width:70px; text-align:center; }
.game-area { display:flex; width:100%; max-width:1300px; padding:0 8px; gap:8px; flex:1; align-items:flex-start; justify-content:center; }
.team-panel { flex:0 0 260px; border-radius:20px; padding:12px; display:flex; flex-direction:column; align-items:center; gap:8px; }
.team-panel.red  { background:linear-gradient(160deg,rgba(220,30,60,.25),rgba(255,100,50,.12)); border:2px solid rgba(255,80,80,.4); }
.team-panel.blue { background:linear-gradient(160deg,rgba(30,100,220,.25),rgba(50,150,255,.12)); border:2px solid rgba(80,150,255,.4); }
.team-lbl { font-family:'Fredoka One',cursive; font-size:1.2rem; padding:4px 18px; border-radius:20px; letter-spacing:1px; }
.red  .team-lbl { background:#dc1e3c; color:#fff; box-shadow:0 4px 15px rgba(220,30,60,.5); }
.blue .team-lbl { background:#1e64dc; color:#fff; box-shadow:0 4px 15px rgba(30,100,220,.5); }
.question-box { width:100%; background:rgba(0,0,0,.3); border-radius:14px; padding:10px 12px; border:1px solid rgba(255,255,255,.1); min-height:64px; display:flex; align-items:center; justify-content:center; text-align:center; }
.question-box p { font-family:'Fredoka One',cursive; font-size:clamp(.95rem,1.5vw,1.15rem); color:#fff; line-height:1.3; }
.red  .question-box p { color:#ffb3b3; }
.blue .question-box p { color:#b3d4ff; }
.options-grid { display:flex; flex-direction:column; gap:6px; width:100%; }
.opt-btn {
  font-family:'Fredoka One',cursive;
  font-size:clamp(.85rem,1.3vw,1rem);
  padding:10px 14px;
  border-radius:12px;
  border:2px solid rgba(255,255,255,.2);
  background:rgba(255,255,255,.08);
  color:#fff;
  cursor:pointer;
  transition:all .15s;
  text-align:left;
  line-height:1.2;
}
.opt-btn:hover:not(:disabled) { transform:scale(1.02); background:rgba(255,255,255,.2); }
.opt-btn:active:not(:disabled) { transform:scale(.97); }
.opt-btn:disabled { opacity:.5; cursor:not-allowed; }
.opt-btn.selected-correct { background:rgba(46,204,113,.35)!important; border-color:#2ecc71!important; color:#2ecc71!important; }
.opt-btn.selected-wrong   { background:rgba(231,76,60,.35)!important;  border-color:#e74c3c!important; color:#e74c3c!important; }
.opt-btn.reveal-correct   { background:rgba(46,204,113,.2)!important;  border-color:#2ecc71!important; }
.arena { flex:1; display:flex; flex-direction:column; align-items:center; gap:6px; padding-top:8px; }
.rope-stage { width:100%; position:relative; height:230px; }
.rope-stage svg { width:100%; height:100%; overflow:visible; }
.feedback-zone { font-family:'Fredoka One',cursive; font-size:1.4rem; min-height:46px; text-align:center; }
.fb-correct { color:#2ecc71; animation:pop .5s ease; }
.fb-wrong   { color:#e74c3c; animation:shake .4s ease; }
@keyframes pop   { 0%{transform:scale(.5);opacity:0} 70%{transform:scale(1.2)} 100%{transform:scale(1);opacity:1} }
@keyframes shake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-8px)} 75%{transform:translateX(8px)} }
.progress-wrap { width:85%; height:20px; background:rgba(0,0,0,.35); border-radius:10px; overflow:hidden; border:1px solid rgba(255,255,255,.1); position:relative; }
.progress-fill { height:100%; width:50%; background:linear-gradient(90deg,#dc1e3c 0%,#ff8c00 50%,#1e64dc 100%); border-radius:10px; transition:width .6s cubic-bezier(.34,1.56,.64,1); }
.progress-mid { position:absolute; left:50%; top:0; width:3px; height:100%; background:#fff; opacity:.5; }
.progress-labels { display:flex; justify-content:space-between; width:85%; font-size:.7rem; color:rgba(255,255,255,.4); font-family:'Fredoka One',cursive; }
.round-lbl { color:rgba(255,255,255,.35); font-size:.75rem; }
.win-screen { display:none; position:fixed; inset:0; background:rgba(0,0,0,.88); z-index:100; flex-direction:column; align-items:center; justify-content:center; gap:20px; backdrop-filter:blur(10px); }
.win-screen.show { display:flex; animation:fadeIn .5s ease; }
.win-title { font-family:'Fredoka One',cursive; font-size:clamp(2.2rem,5vw,4.5rem); text-align:center; padding:0 20px; text-shadow:0 0 40px currentColor; }
.win-emoji { font-size:5rem; animation:bounce 1s infinite alternate; }
@keyframes bounce { from{transform:translateY(0)} to{transform:translateY(-20px)} }
.btn-restart { font-family:'Fredoka One',cursive; font-size:1.4rem; padding:15px 48px; background:linear-gradient(135deg,#FFD700,#ff6b00); border:none; border-radius:50px; color:#fff; cursor:pointer; box-shadow:0 8px 25px rgba(255,107,0,.5); transition:transform .2s; }
.btn-restart:hover { transform:scale(1.05); }
@keyframes fadeIn { from{opacity:0} to{opacity:1} }
.confetti-piece { position:fixed; width:10px; height:18px; border-radius:2px; animation:cfall linear forwards; pointer-events:none; z-index:200; }
@keyframes cfall { 0%{transform:translateY(-100px) rotate(0deg);opacity:1} 100%{transform:translateY(110vh) rotate(720deg);opacity:0} }
.start-screen { display:flex; position:fixed; inset:0; background:linear-gradient(135deg,#1a0a2e,#0f3460); z-index:100; flex-direction:column; align-items:center; justify-content:center; gap:18px; overflow-y:auto; padding:20px 0; }
.start-title { font-family:'Fredoka One',cursive; font-size:clamp(2rem,5vw,3.8rem); color:#FFD700; text-shadow:3px 3px 0 #ff6b00, 0 0 40px rgba(255,215,0,.6); text-align:center; line-height:1.1; padding:0 20px; }
.start-faces { display:flex; gap:20px; align-items:center; font-size:3.5rem; }
.start-vs { font-family:'Fredoka One',cursive; font-size:2rem; color:#fff; }
.cfg-box { background:rgba(255,255,255,.05); border-radius:20px; padding:18px 28px; border:1px solid rgba(255,255,255,.1); display:flex; flex-direction:column; gap:12px; align-items:center; }
.cfg-box label { color:#ccc; font-size:.85rem; text-align:center; }
.cfg-row { display:flex; gap:8px; flex-wrap:wrap; justify-content:center; }
.cfg-btn { font-family:'Fredoka One',cursive; font-size:.9rem; padding:7px 14px; border-radius:20px; border:2px solid rgba(255,255,255,.2); background:rgba(255,255,255,.07); color:#fff; cursor:pointer; transition:all .2s; }
.cfg-btn:hover,.cfg-btn.active { background:rgba(255,215,0,.25); border-color:#FFD700; color:#FFD700; }
.btn-start { font-family:'Fredoka One',cursive; font-size:1.7rem; padding:16px 56px; background:linear-gradient(135deg,#FFD700,#ff6b00); border:none; border-radius:50px; color:#fff; cursor:pointer; box-shadow:0 8px 30px rgba(255,107,0,.6); transition:transform .2s; }
.btn-start:hover { transform:scale(1.05); }
.powered { color:rgba(255,255,255,.25); font-size:.7rem; letter-spacing:2px; text-transform:uppercase; }
</style>
</head>
<body>
<!-- START SCREEN -->
<div class="start-screen" id="startScreen">
  <div class="start-title">üåç CABO DE GUERRA<br>DE GEOGRAFIA üåé</div>
  <div class="start-faces"><span>üåç</span><div class="start-vs">VS</div><span>üåé</span></div>
  <div class="cfg-box">
    <label>üìö Categoria</label>
    <div class="cfg-row" id="catBtns">
      <button class="cfg-btn active" onclick="selCat('all',this)">üé≤ Todas</button>
      <button class="cfg-btn" onclick="selCat('capitais',this)">üèõÔ∏è Capitais</button>
      <button class="cfg-btn" onclick="selCat('paises',this)">üó∫Ô∏è Pa√≠ses</button>
      <button class="cfg-btn" onclick="selCat('brasil',this)">üáßüá∑ Brasil</button>
    </div>
    <label>üéØ Pontos para vencer</label>
    <div class="cfg-row" id="ptBtns">
      <button class="cfg-btn" onclick="selPts(3,this)">3 pts</button>
      <button class="cfg-btn active" onclick="selPts(5,this)">5 pts</button>
      <button class="cfg-btn" onclick="selPts(7,this)">7 pts</button>
    </div>
    <label>‚è±Ô∏è Tempo por rodada</label>
    <div class="cfg-row" id="timeBtns">
      <button class="cfg-btn" onclick="selTime(10,this)">10s</button>
      <button class="cfg-btn active" onclick="selTime(20,this)">20s</button>
      <button class="cfg-btn" onclick="selTime(30,this)">30s</button>
    </div>
  </div>
  <button class="btn-start" onclick="startGame()">üéÆ JOGAR!</button>
  <div class="powered">üì∫ TV Marata√≠zes ¬∑ Educa√ß√£o Gamificada</div>
</div>
<!-- WIN SCREEN -->
<div class="win-screen" id="winScreen">
  <div class="win-emoji">üåç</div>
  <div class="win-title" id="winTitle">Venceu!</div>
  <button class="btn-restart" onclick="resetGame()">üîÑ Jogar Novamente</button>
</div>
<!-- HEADER -->
<div class="header">
  <button class="mute-btn" id="muteBtn" onclick="toggleMute()">üîä</button>
  <h1>üåç CABO DE GUERRA DE GEOGRAFIA üåé</h1>
  <div class="sub">TV Marata√≠zes ¬∑ Educa√ß√£o</div>
  <div class="tv-badge">üì∫</div>
</div>
<!-- SCOREBOARD -->
<div class="scoreboard">
  <div class="score-team red"><span class="lbl">üî¥ TIME VERMELHO</span><span class="pts" id="scoreRed">0</span></div>
  <div>
    <div class="timer" id="timerDisp">‚è± --</div>
    <div style="color:#aaa;font-size:.7rem;text-align:center" id="rdInfo">Rodada 1</div>
  </div>
  <div class="score-team blue"><span class="lbl">AZUL üîµ</span><span class="pts" id="scoreBlue">0</span></div>
</div>
<!-- GAME AREA -->
<div class="game-area">
  <!-- RED PANEL -->
  <div class="team-panel red">
    <div class="team-lbl">üî¥ TIME 1</div>
    <div class="question-box"><p id="qRed">?</p></div>
    <div class="options-grid" id="optsRed"></div>
  </div>
  <!-- ARENA -->
  <div class="arena">
    <div class="rope-stage">
      <svg id="stageSvg" viewBox="0 0 700 230" preserveAspectRatio="xMidYMid meet">
        <ellipse cx="350" cy="222" rx="320" ry="8" fill="rgba(0,0,0,.25)"/>
        <line id="ropeA"    x1="195" y1="138" x2="350" y2="138" stroke="#6B4515" stroke-width="10" stroke-linecap="round"/>
        <line id="ropeB"    x1="350" y1="138" x2="505" y2="138" stroke="#6B4515" stroke-width="10" stroke-linecap="round"/>
        <line id="ropeTex"  x1="195" y1="135" x2="505" y2="135" stroke="#A07840" stroke-width="3"  stroke-linecap="round" opacity=".5"/>
        <line id="ropeTex2" x1="195" y1="141" x2="505" y2="141" stroke="#3D2008" stroke-width="3"  stroke-linecap="round" opacity=".4"/>
        <line x1="350" y1="100" x2="350" y2="190" stroke="#FFD700" stroke-width="3" stroke-dasharray="7,5" opacity=".85"/>
        <rect x="344" y="96" width="12" height="8" fill="#FFD700" rx="2"/>
        <line x1="350" y1="96" x2="350" y2="80" stroke="#FFD700" stroke-width="2.5"/>
        <g id="knotG" transform="translate(0,0)">
          <circle cx="350" cy="138" r="13" fill="#3D2008" stroke="#6B4515" stroke-width="2.5"/>
          <circle cx="350" cy="138" r="8"  fill="#6B4515"/>
          <circle cx="350" cy="138" r="4"  fill="#A07840"/>
        </g>
        <!-- PERSONAGEM VERMELHO -->
        <g id="charRed" transform="translate(90, 50)">
          <g id="leanRed" style="transform-origin:55px 155px; transform:rotate(0deg)">
            <line x1="32" y1="105" x2="6"   y2="88" stroke="#2980b9" stroke-width="10" stroke-linecap="round"/>
            <line x1="78" y1="105" x2="105" y2="88" stroke="#2980b9" stroke-width="10" stroke-linecap="round"/>
            <circle cx="105" cy="88" r="9" fill="#1a5a8a" stroke="#0d3557" stroke-width="2"/>
            <circle cx="55" cy="105" r="38" fill="#DC1E3C" stroke="#a0001e" stroke-width="2"/>
            <ellipse cx="55" cy="105" rx="38" ry="15" fill="none" stroke="rgba(255,255,255,.3)" stroke-width="1.5"/>
            <ellipse cx="55" cy="105" rx="20" ry="38" fill="none" stroke="rgba(255,255,255,.3)" stroke-width="1.5"/>
            <line x1="17" y1="105" x2="93" y2="105" stroke="rgba(255,255,255,.3)" stroke-width="1.5"/>
            <circle cx="42" cy="96" r="10" fill="white"/>
            <circle cx="68" cy="96" r="10" fill="white"/>
            <circle cx="44" cy="96" r="5.5" fill="#3D1F00"/>
            <circle cx="70" cy="96" r="5.5" fill="#3D1F00"/>
            <circle cx="45" cy="94" r="2.2" fill="white"/>
            <circle cx="71" cy="94" r="2.2" fill="white"/>
            <rect x="32" y="87" width="20" height="18" rx="8" fill="none" stroke="#3D1F00" stroke-width="3"/>
            <rect x="58" y="87" width="20" height="18" rx="8" fill="none" stroke="#3D1F00" stroke-width="3"/>
            <line x1="52" y1="96" x2="58" y2="96" stroke="#3D1F00" stroke-width="2.5"/>
            <line x1="32" y1="96" x2="26" y2="95" stroke="#3D1F00" stroke-width="2.5"/>
            <line x1="78" y1="96" x2="84" y2="95" stroke="#3D1F00" stroke-width="2.5"/>
            <path d="M 43 112 Q 55 120 67 112" fill="none" stroke="#3D1F00" stroke-width="3" stroke-linecap="round"/>
            <ellipse cx="55" cy="67" rx="22" ry="7" fill="#1a5a8a"/>
            <path d="M33 67 Q35 48 55 44 Q75 48 77 67" fill="#2471a3" stroke="#1a5a8a" stroke-width="1"/>
            <line x1="44" y1="44" x2="55" y2="28" stroke="#FFD700" stroke-width="3"/>
            <circle cx="55" cy="26" r="5" fill="#FFD700"/>
            <rect x="40" y="140" width="12" height="20" rx="5" fill="#2980b9"/>
            <rect x="58" y="140" width="12" height="20" rx="5" fill="#2980b9"/>
            <ellipse cx="46" cy="161" rx="11" ry="6" fill="#1a5a8a"/>
            <ellipse cx="64" cy="161" rx="11" ry="6" fill="#1a5a8a"/>
          </g>
        </g>
        <!-- PERSONAGEM AZUL -->
        <g id="charBlue" transform="translate(560,50) scale(-1,1) translate(-110,0)">
          <g id="leanBlue" style="transform-origin:55px 155px; transform:rotate(0deg)">
            <line x1="32" y1="105" x2="6"   y2="88" stroke="#e67e22" stroke-width="10" stroke-linecap="round"/>
            <line x1="78" y1="105" x2="105" y2="88" stroke="#e67e22" stroke-width="10" stroke-linecap="round"/>
            <circle cx="105" cy="88" r="9" fill="#ca6f1e" stroke="#a04000" stroke-width="2"/>
            <circle cx="55" cy="105" r="38" fill="#1E64DC" stroke="#0d3da0" stroke-width="2"/>
            <ellipse cx="55" cy="105" rx="38" ry="15" fill="none" stroke="rgba(255,255,255,.3)" stroke-width="1.5"/>
            <ellipse cx="55" cy="105" rx="20" ry="38" fill="none" stroke="rgba(255,255,255,.3)" stroke-width="1.5"/>
            <line x1="17" y1="105" x2="93" y2="105" stroke="rgba(255,255,255,.3)" stroke-width="1.5"/>
            <circle cx="42" cy="96" r="10" fill="white"/>
            <circle cx="68" cy="96" r="10" fill="white"/>
            <circle cx="44" cy="96" r="5.5" fill="#3D1F00"/>
            <circle cx="70" cy="96" r="5.5" fill="#3D1F00"/>
            <circle cx="45" cy="94" r="2.2" fill="white"/>
            <circle cx="71" cy="94" r="2.2" fill="white"/>
            <rect x="32" y="87" width="20" height="18" rx="8" fill="none" stroke="#3D1F00" stroke-width="3"/>
            <rect x="58" y="87" width="20" height="18" rx="8" fill="none" stroke="#3D1F00" stroke-width="3"/>
            <line x1="52" y1="96" x2="58" y2="96" stroke="#3D1F00" stroke-width="2.5"/>
            <line x1="32" y1="96" x2="26" y2="95" stroke="#3D1F00" stroke-width="2.5"/>
            <line x1="78" y1="96" x2="84" y2="95" stroke="#3D1F00" stroke-width="2.5"/>
            <path d="M 43 112 Q 55 120 67 112" fill="none" stroke="#3D1F00" stroke-width="3" stroke-linecap="round"/>
            <ellipse cx="55" cy="67" rx="22" ry="7" fill="#ca6f1e"/>
            <path d="M33 67 Q35 48 55 44 Q75 48 77 67" fill="#e67e22" stroke="#ca6f1e" stroke-width="1"/>
            <line x1="44" y1="44" x2="55" y2="28" stroke="#FFD700" stroke-width="3"/>
            <circle cx="55" cy="26" r="5" fill="#FFD700"/>
            <rect x="40" y="140" width="12" height="20" rx="5" fill="#e67e22"/>
            <rect x="58" y="140" width="12" height="20" rx="5" fill="#e67e22"/>
            <ellipse cx="46" cy="161" rx="11" ry="6" fill="#ca6f1e"/>
            <ellipse cx="64" cy="161" rx="11" ry="6" fill="#ca6f1e"/>
          </g>
        </g>
      </svg>
    </div>
    <div class="progress-labels"><span>üî¥</span><span>üîµ</span></div>
    <div class="progress-wrap">
      <div class="progress-fill" id="progFill"></div>
      <div class="progress-mid"></div>
    </div>
    <div class="feedback-zone" id="fbZone"></div>
    <div class="round-lbl" id="centerLbl">Escolha a resposta!</div>
  </div>
  <!-- BLUE PANEL -->
  <div class="team-panel blue">
    <div class="team-lbl">AZUL üîµ</div>
    <div class="question-box"><p id="qBlue">?</p></div>
    <div class="options-grid" id="optsBlue"></div>
  </div>
</div>
<script>
const QUESTIONS = {
  capitais: [
    { q:"Qual √© a capital do Brasil?", a:"Bras√≠lia", opts:["S√£o Paulo","Rio de Janeiro","Bras√≠lia","Belo Horizonte"] },
    { q:"Qual √© a capital da Argentina?", a:"Buenos Aires", opts:["C√≥rdoba","Ros√°rio","Buenos Aires","Mendoza"] },
    { q:"Qual √© a capital da Fran√ßa?", a:"Paris", opts:["Lyon","Marselha","Nice","Paris"] },
    { q:"Qual √© a capital da Austr√°lia?", a:"Camberra", opts:["Sydney","Melbourne","Camberra","Brisbane"] },
    { q:"Qual √© a capital do Jap√£o?", a:"T√≥quio", opts:["Osaka","Quioto","Hiroshima","T√≥quio"] },
    { q:"Qual √© a capital do Canad√°?", a:"Ottawa", opts:["Toronto","Vancouver","Ottawa","Montreal"] },
    { q:"Qual √© a capital do Egito?", a:"Cairo", opts:["Alexandria","Luxor","Assu√£","Cairo"] },
    { q:"Qual √© a capital da R√∫ssia?", a:"Moscou", opts:["S√£o Petersburgo","Moscou","Novosibirsk","Kazan"] },
    { q:"Qual √© a capital dos EUA?", a:"Washington D.C.", opts:["Nova York","Los Angeles","Washington D.C.","Chicago"] },
    { q:"Qual √© a capital do M√©xico?", a:"Cidade do M√©xico", opts:["Guadalajara","Monterrey","Cidade do M√©xico","Tijuana"] },
    { q:"Qual √© a capital da China?", a:"Pequim", opts:["Xangai","Pequim","Guangzhou","Shenzhen"] },
    { q:"Qual √© a capital da √çndia?", a:"Nova Delhi", opts:["Mumbai","Calcut√°","Chennai","Nova Delhi"] },
    { q:"Qual √© a capital da It√°lia?", a:"Roma", opts:["Mil√£o","Floren√ßa","Veneza","Roma"] },
    { q:"Qual √© a capital da Alemanha?", a:"Berlim", opts:["Munique","Hamburgo","Frankfurt","Berlim"] },
    { q:"Qual √© a capital do Chile?", a:"Santiago", opts:["Valpara√≠so","Concepci√≥n","Santiago","Antofagasta"] },
    { q:"Qual √© a capital do Peru?", a:"Lima", opts:["Cusco","Arequipa","Lima","Trujillo"] },
    { q:"Qual √© a capital do Portugal?", a:"Lisboa", opts:["Porto","Coimbra","Lisboa","Faro"] },
    { q:"Qual √© a capital da Espanha?", a:"Madrid", opts:["Barcelona","Sevilha","Madrid","Val√™ncia"] },
    { q:"Qual √© a capital do Reino Unido?", a:"Londres", opts:["Manchester","Birmingham","Edimburgo","Londres"] },
    { q:"Qual √© a capital da √Åfrica do Sul?", a:"Pret√≥ria", opts:["Joanesburgo","Cidade do Cabo","Pret√≥ria","Durban"] },
  ],
  paises: [
    { q:"Em qual pa√≠s fica o Rio Nilo?", a:"Egito", opts:["Sud√£o","Eti√≥pia","Egito","L√≠bia"] },
    { q:"Qual √© o maior pa√≠s do mundo em √°rea?", a:"R√∫ssia", opts:["Canad√°","EUA","China","R√∫ssia"] },
    { q:"Qual pa√≠s tem mais habitantes?", a:"√çndia", opts:["China","EUA","√çndia","Indon√©sia"] },
    { q:"Em qual continente fica o Marrocos?", a:"√Åfrica", opts:["Europa","√Åsia","Am√©rica","√Åfrica"] },
    { q:"Qual pa√≠s √© conhecido como 'Terra do Sol Nascente'?", a:"Jap√£o", opts:["China","Coreia do Sul","Jap√£o","Tail√¢ndia"] },
    { q:"O Deserto do Saara fica em qual continente?", a:"√Åfrica", opts:["√Åsia","Am√©rica","√Åfrica","Oceania"] },
    { q:"Qual √© o menor pa√≠s do mundo?", a:"Vaticano", opts:["Monaco","San Marino","Vaticano","Liechtenstein"] },
    { q:"Em qual pa√≠s fica Machu Picchu?", a:"Peru", opts:["Bol√≠via","Chile","Equador","Peru"] },
    { q:"O Canal de Suez liga quais mares?", a:"Mediterr√¢neo e Vermelho", opts:["Mediterr√¢neo e Negro","Mediterr√¢neo e Vermelho","Ar√°bico e Vermelho","C√°spio e Negro"] },
    { q:"Qual pa√≠s possui a maior floresta tropical do mundo?", a:"Brasil", opts:["Congo","Indon√©sia","Brasil","Col√¥mbia"] },
    { q:"Em qual pa√≠s ficam os Alpes?", a:"Su√≠√ßa", opts:["√Åustria","Su√≠√ßa","Fran√ßa","It√°lia"] },
    { q:"O Monte Everest fica na fronteira entre Nepal e...?", a:"China", opts:["√çndia","China","But√£o","Tibete"] },
    { q:"Qual √© o √∫nico pa√≠s que ocupa um continente inteiro?", a:"Austr√°lia", opts:["Brasil","R√∫ssia","Austr√°lia","Canad√°"] },
    { q:"Qual pa√≠s tem o maior n√∫mero de ilhas do mundo?", a:"Su√©cia", opts:["Noruega","Su√©cia","Finl√¢ndia","Filipinas"] },
    { q:"Em qual pa√≠s fica a Torre Eiffel?", a:"Fran√ßa", opts:["B√©lgica","Fran√ßa","Su√≠√ßa","Luxemburgo"] },
    { q:"Qual pa√≠s √© chamado de 'Pa√≠s do Futebol'?", a:"Brasil", opts:["Argentina","Brasil","Alemanha","Espanha"] },
    { q:"Em qual continente fica o Amazonas?", a:"Am√©rica do Sul", opts:["Am√©rica do Norte","Am√©rica do Sul","√Åfrica","Oceania"] },
    { q:"Qual pa√≠s tem a maior popula√ß√£o da Europa?", a:"R√∫ssia", opts:["Alemanha","Fran√ßa","R√∫ssia","Reino Unido"] },
    { q:"O Lago Titicaca fica entre Brasil e...?", a:"Bol√≠via e Peru", opts:["Bol√≠via e Peru","Argentina e Chile","Equador e Col√¥mbia","Paraguai e Uruguai"] },
    { q:"Em qual continente fica a Nova Zel√¢ndia?", a:"Oceania", opts:["√Åsia","Oceania","Am√©rica","√Åfrica"] },
  ],
  brasil: [
    { q:"Qual √© o maior estado do Brasil?", a:"Amazonas", opts:["Par√°","Mato Grosso","Amazonas","Minas Gerais"] },
    { q:"Qual √© o menor estado do Brasil?", a:"Sergipe", opts:["Alagoas","Rio de Janeiro","Sergipe","Esp√≠rito Santo"] },
    { q:"Quantos estados tem o Brasil?", a:"27", opts:["25","26","27","28"] },
    { q:"Qual √© o estado mais populoso do Brasil?", a:"S√£o Paulo", opts:["Rio de Janeiro","Minas Gerais","S√£o Paulo","Bahia"] },
    { q:"O Rio S√£o Francisco nasce em qual estado?", a:"Minas Gerais", opts:["Bahia","Goi√°s","Minas Gerais","Pernambuco"] },
    { q:"Qual estado brasileiro faz fronteira com mais pa√≠ses?", a:"Mato Grosso do Sul", opts:["Amazonas","Par√°","Mato Grosso do Sul","Roraima"] },
    { q:"Qual √© a capital do Esp√≠rito Santo?", a:"Vit√≥ria", opts:["Cachoeiro","Colatina","Vit√≥ria","Guarapari"] },
    { q:"Qual √© o rio mais largo do Brasil?", a:"Amazonas", opts:["Paran√°","S√£o Francisco","Tocantins","Amazonas"] },
    { q:"Em qual estado fica o Pantanal?", a:"Mato Grosso do Sul", opts:["Goi√°s","Mato Grosso do Sul","Tocantins","Par√°"] },
    { q:"Qual √© a capital do Maranh√£o?", a:"S√£o Lu√≠s", opts:["Imperatriz","Caxias","S√£o Lu√≠s","Cod√≥"] },
    { q:"Qual regi√£o do Brasil tem mais estados?", a:"Nordeste", opts:["Norte","Nordeste","Centro-Oeste","Sudeste"] },
    { q:"Qual √© a capital do Mato Grosso do Sul?", a:"Campo Grande", opts:["Dourados","Corumb√°","Campo Grande","Tr√™s Lagoas"] },
    { q:"A Serra da Canastra fica em qual estado?", a:"Minas Gerais", opts:["Goi√°s","Minas Gerais","S√£o Paulo","Esp√≠rito Santo"] },
    { q:"Qual estado √© conhecido como 'Gr√£o-Par√°'?", a:"Par√°", opts:["Amap√°","Roraima","Par√°","Amazonas"] },
    { q:"Qual √© a capital da Bahia?", a:"Salvador", opts:["Feira de Santana","Ilh√©us","Salvador","Vit√≥ria da Conquista"] },
    { q:"O Arquip√©lago de Fernando de Noronha pertence a qual estado?", a:"Pernambuco", opts:["Cear√°","Rio Grande do Norte","Pernambuco","Alagoas"] },
    { q:"Qual √© o estado mais ao sul do Brasil?", a:"Rio Grande do Sul", opts:["Santa Catarina","Paran√°","Rio Grande do Sul","S√£o Paulo"] },
    { q:"Qual √© a capital do Tocantins?", a:"Palmas", opts:["Aragua√≠na","Gurupi","Palmas","Porto Nacional"] },
    { q:"Em qual estado fica a Chapada Diamantina?", a:"Bahia", opts:["Minas Gerais","Goi√°s","Bahia","Piau√≠"] },
    { q:"Qual cidade √© conhecida como 'Cidade Maravilhosa'?", a:"Rio de Janeiro", opts:["S√£o Paulo","Rio de Janeiro","Salvador","Recife"] },
  ]
};

function buildPool(cat) {
  let arr = [];
  if (cat === 'all') { Object.values(QUESTIONS).forEach(v => arr = arr.concat(v)); }
  else { arr = [...QUESTIONS[cat]]; }
  return shuffle(arr);
}

function shuffle(a) {
  const b = [...a];
  for (let i = b.length-1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i+1));
    [b[i],b[j]] = [b[j],b[i]];
  }
  return b;
}

let audioCtx = null, muted = false;
function getCtx() {
  if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  return audioCtx;
}
function toggleMute() {
  muted = !muted;
  document.getElementById('muteBtn').textContent = muted ? 'üîá' : 'üîä';
}
function playTone(freq, type, duration, volume, freqEnd) {
  if (muted) return;
  try {
    const ctx = getCtx();
    const osc = ctx.createOscillator(), gain = ctx.createGain();
    osc.connect(gain); gain.connect(ctx.destination);
    osc.type = type;
    osc.frequency.setValueAtTime(freq, ctx.currentTime);
    if (freqEnd) osc.frequency.linearRampToValueAtTime(freqEnd, ctx.currentTime + duration);
    gain.gain.setValueAtTime(volume, ctx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + duration);
    osc.start(ctx.currentTime); osc.stop(ctx.currentTime + duration);
  } catch(e) {}
}
function sfxCorrect() { playTone(520,'sine',.12,.4); setTimeout(()=>playTone(660,'sine',.12,.4),110); setTimeout(()=>playTone(880,'sine',.2,.4),220); }
function sfxWrong() { playTone(220,'sawtooth',.08,.3,140); setTimeout(()=>playTone(140,'sawtooth',.15,.25,100),80); }
function sfxPull() { playTone(180,'sine',.18,.25,80); playTone(300,'triangle',.18,.15,120); }
function sfxTick() { playTone(880,'square',.06,.18); }
function sfxNewRound() { playTone(440,'sine',.1,.25); setTimeout(()=>playTone(550,'sine',.12,.25),130); }
function sfxVictory() {
  const notes=[523,659,784,1047];
  notes.forEach((f,i)=>setTimeout(()=>playTone(f,'sine',.18,.4),i*140));
  setTimeout(()=>{ playTone(784,'sine',.1,.3); setTimeout(()=>playTone(1047,'sine',.35,.5),120); },notes.length*140);
}
function sfxClick() { playTone(600,'sine',.05,.15); }

const G = {
  cat:'all', maxPts:5, roundTime:20,
  scoreRed:0, scoreBlue:0,
  ropePos:350, round:1,
  pool:[], usedIdx:new Set(),
  qRed:null, qBlue:null,
  ansRed:null, ansBlue:null,
  lockRed:false, lockBlue:false,
  active:false, timer:null, timeLeft:20, rafId:null,
};

function selCat(c,b){ G.cat=c; tog('#catBtns',b); }
function selPts(p,b){ G.maxPts=p; tog('#ptBtns',b); }
function selTime(t,b){ G.roundTime=t; tog('#timeBtns',b); }
function tog(sel,btn){ document.querySelectorAll(sel+' .cfg-btn').forEach(x=>x.classList.remove('active')); btn.classList.add('active'); }

const ROPE_LEFT=150, ROPE_RIGHT=550, ROPE_MID=350;

function updateVisual(kx) {
  document.getElementById('knotG').setAttribute('transform',`translate(${kx-350},0)`);
  const slide = (kx - ROPE_MID) * 0.32;
  document.getElementById('charRed').setAttribute('transform',  `translate(${90 + slide}, 50)`);
  document.getElementById('charBlue').setAttribute('transform', `translate(${560 + slide}, 50) scale(-1,1) translate(-110,0)`);
  const redHandX  = 195 + slide;
  const blueHandX = 565 + slide;
  document.getElementById('ropeA').setAttribute('x1', redHandX);
  document.getElementById('ropeA').setAttribute('x2', kx);
  document.getElementById('ropeB').setAttribute('x1', kx);
  document.getElementById('ropeB').setAttribute('x2', blueHandX);
  document.getElementById('ropeTex').setAttribute('x1',  redHandX);
  document.getElementById('ropeTex').setAttribute('x2',  blueHandX);
  document.getElementById('ropeTex2').setAttribute('x1', redHandX);
  document.getElementById('ropeTex2').setAttribute('x2', blueHandX);
  const offset = kx - ROPE_MID;
  document.getElementById('leanRed').style.transform  = `rotate(${Math.max(-18,Math.min(22,offset*.09))}deg)`;
  document.getElementById('leanBlue').style.transform = `rotate(${Math.max(-18,Math.min(22,-offset*.09))}deg)`;
  const pct = ((kx - ROPE_LEFT) / (ROPE_RIGHT - ROPE_LEFT)) * 100;
  document.getElementById('progFill').style.width = Math.max(0,Math.min(100,pct))+'%';
}

function animateTo(target, onDone) {
  cancelAnimationFrame(G.rafId);
  const from=G.ropePos, dist=target-from, dur=1000, t0=performance.now();
  function step(now) {
    const p=Math.min(1,(now-t0)/dur), e=1-Math.pow(1-p,3);
    G.ropePos=from+dist*e; updateVisual(G.ropePos);
    if(p<1) G.rafId=requestAnimationFrame(step);
    else { G.ropePos=target; if(onDone) onDone(); }
  }
  G.rafId=requestAnimationFrame(step);
}

let swayPhase=0;
function swayLoop() {
  if(!G.active){ swayPhase+=0.025; updateVisual(G.ropePos+Math.sin(swayPhase)*3); }
  requestAnimationFrame(swayLoop);
}
swayLoop();

function pickQ() {
  if (G.pool.length === 0 || G.usedIdx.size >= G.pool.length) {
    G.pool = buildPool(G.cat); G.usedIdx.clear();
  }
  let idx;
  do { idx = Math.floor(Math.random() * G.pool.length); } while (G.usedIdx.has(idx));
  G.usedIdx.add(idx);
  return G.pool[idx];
}

function renderOpts(team, qObj) {
  const container = document.getElementById('opts'+cap(team));
  container.innerHTML = '';
  const opts = shuffle(qObj.opts);
  opts.forEach(opt => {
    const btn = document.createElement('button');
    btn.className = 'opt-btn';
    btn.textContent = opt;
    btn.onclick = () => chooseAnswer(team, opt, qObj.a, btn);
    container.appendChild(btn);
  });
}

function chooseAnswer(team, chosen, correct, btn) {
  if (!G.active) return;
  if (team === 'red'  && G.lockRed)  return;
  if (team === 'blue' && G.lockBlue) return;
  sfxClick();
  if (team === 'red')  { G.ansRed  = chosen; G.lockRed  = true; }
  else                 { G.ansBlue = chosen; G.lockBlue = true; }
  const isCorrect = chosen === correct;
  btn.classList.add(isCorrect ? 'selected-correct' : 'selected-wrong');
  if (!isCorrect) {
    const container = document.getElementById('opts'+cap(team));
    container.querySelectorAll('.opt-btn').forEach(b => { if (b.textContent === correct) b.classList.add('reveal-correct'); });
  }
  const container = document.getElementById('opts'+cap(team));
  container.querySelectorAll('.opt-btn').forEach(b => b.disabled = true);
  if (G.lockRed && G.lockBlue) { clearInterval(G.timer); endRound(); }
}

function startGame() {
  getCtx();
  G.pool = buildPool(G.cat); G.usedIdx.clear();
  document.getElementById('startScreen').style.display = 'none';
  newRound();
}

function newRound() {
  G.qRed  = pickQ();
  G.qBlue = pickQ();
  let tries = 0;
  while (G.qBlue.q === G.qRed.q && tries++ < 20) G.qBlue = pickQ();
  G.ansRed = null; G.ansBlue = null;
  G.lockRed = false; G.lockBlue = false;
  G.active = true; G.timeLeft = G.roundTime;
  document.getElementById('qRed').textContent  = G.qRed.q;
  document.getElementById('qBlue').textContent = G.qBlue.q;
  renderOpts('red',  G.qRed);
  renderOpts('blue', G.qBlue);
  document.getElementById('fbZone').textContent = '';
  document.getElementById('fbZone').className = 'feedback-zone';
  document.getElementById('centerLbl').textContent = `Rodada ${G.round}`;
  document.getElementById('rdInfo').textContent = `Rodada ${G.round}`;
  clearInterval(G.timer); updTimer(); sfxNewRound();
  G.timer = setInterval(() => {
    G.timeLeft--; updTimer();
    if (G.timeLeft <= 5 && G.timeLeft > 0) sfxTick();
    if (G.timeLeft <= 0) { clearInterval(G.timer); endRound(); }
  }, 1000);
}

function updTimer() { document.getElementById('timerDisp').textContent = `‚è± ${G.timeLeft}s`; }
function cap(s) { return s.charAt(0).toUpperCase() + s.slice(1); }

function endRound() {
  G.active = false; clearInterval(G.timer);
  const rOk = G.ansRed  === G.qRed.a;
  const bOk = G.ansBlue === G.qBlue.a;
  if (!G.lockRed) {
    document.getElementById('optsRed').querySelectorAll('.opt-btn').forEach(b => {
      b.disabled = true;
      if (b.textContent === G.qRed.a) b.classList.add('reveal-correct');
    });
  }
  if (!G.lockBlue) {
    document.getElementById('optsBlue').querySelectorAll('.opt-btn').forEach(b => {
      b.disabled = true;
      if (b.textContent === G.qBlue.a) b.classList.add('reveal-correct');
    });
  }
  const fbEl = document.getElementById('fbZone');
  let shift = 0, fb = '';
  if (rOk && !bOk) {
    shift = -55; G.scoreRed++;
    fb = 'üåç Vermelho acertou! üí™ Puxa!';
    fbEl.className = 'feedback-zone fb-correct';
    sfxCorrect(); setTimeout(sfxPull, 300);
  } else if (bOk && !rOk) {
    shift = +55; G.scoreBlue++;
    fb = 'üåé Azul acertou! üí™ Puxa!';
    fbEl.className = 'feedback-zone fb-correct';
    sfxCorrect(); setTimeout(sfxPull, 300);
  } else if (rOk && bOk) {
    fb = 'üéØ Empate! Os dois acertaram!';
    fbEl.className = 'feedback-zone fb-correct';
    sfxCorrect();
  } else {
    fb = 'üòÖ Ningu√©m acertou! Pr√≥xima rodada...';
    fbEl.className = 'feedback-zone fb-wrong';
    sfxWrong();
  }
  fbEl.textContent = fb;
  document.getElementById('scoreRed').textContent  = G.scoreRed;
  document.getElementById('scoreBlue').textContent = G.scoreBlue;
  const newPos = Math.max(ROPE_LEFT, Math.min(ROPE_RIGHT, G.ropePos + shift));
  animateTo(newPos, () => {
    if (G.scoreRed  >= G.maxPts || newPos <= ROPE_LEFT  + 10) { setTimeout(() => showWin('red'),  400); return; }
    if (G.scoreBlue >= G.maxPts || newPos >= ROPE_RIGHT - 10) { setTimeout(() => showWin('blue'), 400); return; }
    G.round++;
    setTimeout(newRound, 2500);
  });
}

function showWin(t) {
  const isRed = t === 'red';
  document.getElementById('winTitle').textContent = isRed ? 'üî¥ TIME VERMELHO VENCEU! üéâ' : 'üîµ TIME AZUL VENCEU! üéâ';
  document.getElementById('winTitle').style.color = isRed ? '#ff6b6b' : '#6bb3ff';
  document.getElementById('winScreen').classList.add('show');
  sfxVictory(); confetti();
}

function resetGame() {
  G.scoreRed = 0; G.scoreBlue = 0; G.ropePos = ROPE_MID; G.round = 1;
  G.usedIdx.clear();
  clearInterval(G.timer); cancelAnimationFrame(G.rafId);
  document.getElementById('winScreen').classList.remove('show');
  document.getElementById('scoreRed').textContent  = '0';
  document.getElementById('scoreBlue').textContent = '0';
  updateVisual(ROPE_MID);
  document.getElementById('startScreen').style.display = 'flex';
}

function confetti() {
  const cols = ['#FFD700','#ff4757','#1e90ff','#2ecc71','#ff6b81','#eccc68'];
  for (let i = 0; i < 80; i++) {
    const el = document.createElement('div');
    el.className = 'confetti-piece';
    el.style.left = Math.random()*100+'vw';
    el.style.background = cols[Math.floor(Math.random()*cols.length)];
    el.style.animationDuration = (1.5+Math.random()*2.5)+'s';
    el.style.animationDelay = Math.random()+'s';
    el.style.width  = (6+Math.random()*8)+'px';
    el.style.height = (10+Math.random()*14)+'px';
    el.style.transform = `rotate(${Math.random()*360}deg)`;
    document.body.appendChild(el);
    setTimeout(() => el.remove(), 4500);
  }
}

updateVisual(ROPE_MID);
</script>
</body>
</html>
