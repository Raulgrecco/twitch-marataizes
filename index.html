<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TV Marataízes - Ao vivo</title>
<style>
  body,html{
    margin:0; padding:0; height:100%; background:#000;
    display:flex; align-items:center; justify-content:center;
  }
  #twitch-embed{
    width:100%; height:100%; position:relative;
  }
  /* ticker */
  .ticker-wrap{
    position:absolute; left:0; bottom:0; width:100%; height:50px;
    background:rgba(0,0,0,0.85); display:flex; align-items:center;
    border-top:2px solid #f7b733; z-index:9999;
  }
  .ticker-tag{
    background:#d50000; color:#fff; font:bold 20px Arial;
    padding:0 14px; display:flex; align-items:center;
  }
  .ticker-track{ flex:1; overflow:hidden; height:100%; }
  .ticker-marquee{
    white-space:nowrap; display:inline-block; color:#fff;
    font:bold 20px Arial; padding-left:20px;
    animation:ticker-scroll 25s linear infinite;
  }
  .bullet{opacity:.5; padding:0 18px}
  @keyframes ticker-scroll{
    from{transform:translateX(100%);}
    to{transform:translateX(-100%);}
  }
</style>
<script src="https://player.twitch.tv/js/embed/v1.js"></script>
</head>
<body>
<div id="twitch-embed">
  <!-- ticker -->
  <div class="ticker-wrap">
    <div class="ticker-tag">AO VIVO</div>
    <div class="ticker-track">
      <div class="ticker-marquee" id="mq">Carregando…</div>
    </div>
  </div>
</div>

<script>
  // Carrega ticker do arquivo
  const SEP = ' <span class="bullet">•</span> ';
  const mq = document.getElementById('mq');
  async function carregarTicker(){
    try{
      const res = await fetch('ticker.txt?_='+Date.now(), {cache:'no-store'});
      const txt = await res.text();
      const itens = txt.split(/\r?\n/).map(s=>s.trim()).filter(Boolean);
      mq.innerHTML = itens.length ? itens.join(SEP)+SEP : ' ';
    }catch(e){
      mq.textContent = '⚠️ Não foi possível carregar as notícias.';
    }
  }
  carregarTicker();
  setInterval(carregarTicker, 20000);

  // Player Twitch
  new Twitch.Embed("twitch-embed", {
    width:"100%", height:"100%",
    channel:"tvmarataizes",
    parent:["www.seusite.com","seusite.com","localhost"]
  });
</script>
</body>
</html>
