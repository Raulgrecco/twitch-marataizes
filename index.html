<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>TV Marata√≠zes ‚Äî ao vivo</title>
  <meta name="description" content="TV Marata√≠zes ao vivo ‚Äî programa√ß√£o local." />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <meta name="theme-color" content="#000" />
  <meta property="og:title" content="TV Marata√≠zes ‚Äî ao vivo" />
  <meta property="og:description" content="Canal de streaming local de Marata√≠zes e regi√£o. Programa√ß√£o ao vivo, quadros especiais e cultura capixaba." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://tvmarataizes.com.br" />
  <meta property="og:image" content="https://tvmarataizes.com.br/clima/cover.jpg" />
  <style>
    *{box-sizing:border-box}
    :root{
      --bg:#000; --fg:#fff; --accent:#ff3355; --glass:rgba(255,255,255,.08); --glass-b:#ffffff26;
    }
    html,body{margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif}
    header{display:flex;justify-content:center;align-items:center;gap:10px;padding:14px}
    .dot{width:10px;height:10px;border-radius:999px;background:var(--accent);box-shadow:0 0 12px var(--accent)}
    .brand{font-weight:900;font-size:clamp(18px,2.4vw,24px)}
    .wrap{max-width:1200px;margin:0 auto;padding:0 12px 28px}
    .player{position:relative;width:100%;aspect-ratio:16/9;background:#000;border:0;overflow:hidden;border-radius:12px}
    .player iframe{position:absolute;inset:0;width:100%;height:100%;border:0}
    .about{max-width:980px;margin:18px auto 40px;line-height:1.6}
    .about h1{margin:0 0 10px;font-size:clamp(20px,3.6vw,28px);font-weight:900}
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .btn{background:var(--glass);border:1px solid var(--glass-b);color:#fff;text-decoration:none;
         padding:10px 14px;border-radius:10px;font-weight:700}
    .btn.primary{background:var(--accent);border:0;font-weight:900}
    .tip{margin-top:10px;font-size:clamp(12px,2.6vw,14px);opacity:.8}

    /* Overlay para webview de apps (IG/FB/TikTok) */
    .overlay{
      position:absolute;inset:0;display:none;place-items:center;text-align:center;
      padding:22px;background:linear-gradient(180deg, rgba(0,0,0,.85), rgba(0,0,0,.92));
      color:#fff;
    }
    .overlay-inner{
      max-width:580px;margin:auto;background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.18);backdrop-filter:blur(8px);
      padding:18px;border-radius:14px;
    }
    .overlay h2{margin:0 0 8px;font-size:clamp(18px,5vw,22px)}
    .overlay p{margin:8px 0 0;font-size:clamp(14px,4vw,16px);opacity:.95}
    .overlay .steps{margin-top:12px;text-align:left}
    .overlay .steps li{margin:6px 0;font-size:clamp(13px,3.8vw,15px)}
    .overlay .bar{height:1px;background:rgba(255,255,255,.18);margin:12px 0}
    .overlay .row{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
    .overlay .btn{cursor:pointer}

    /* aviso discreto abaixo do player quando vier de app */
    .inline-tip{display:none;margin-top:10px;opacity:.75;font-size:clamp(12px,2.6vw,14px)}
  </style>
</head>
<body>
  <header>
    <span class="dot" aria-hidden="true"></span>
    <div class="brand">TV Marata√≠zes ‚Äî Ao Vivo</div>
  </header>

  <main class="wrap">
    <div class="player" aria-label="Player ao vivo">
      <iframe
        id="livePlayer"
        title="Player ao vivo"
        allow="autoplay; fullscreen; picture-in-picture; encrypted-media"
        allowfullscreen
        playsinline
        webkit-playsinline
        src="https://player.twitch.tv/?channel=marataizestv&parent=tvmarataizes.com.br&parent=www.tvmarataizes.com.br&muted=true&autoplay=true">
      </iframe>

      <!-- Overlay para webview de apps (sem mencionar plataforma) -->
      <div id="appOverlay" class="overlay" role="dialog" aria-live="polite" aria-label="Abrir no navegador">
        <div class="overlay-inner">
          <h2>Abra no navegador para assistir</h2>
          <p>O visualizador interno deste aplicativo limita a reprodu√ß√£o de v√≠deo. Para ver ao vivo sem travar:</p>
          <ul class="steps">
            <li>No canto superior direito, toque em <strong>‚ãØ</strong> (tr√™s pontinhos).</li>
            <li>Escolha <strong>Abrir no navegador</strong> (Safari/Chrome).</li>
            <li>Volte aqui quando preferir: <strong>tvmarataizes.com.br</strong></li>
          </ul>
          <div class="bar"></div>
          <div class="row">
            <button class="btn primary" id="tryOpen">Tentar abrir no navegador</button>
            <button class="btn" id="dismiss">Tentar assim mesmo</button>
            <button class="btn" id="copyUrl">Copiar link</button>
          </div>
        </div>
      </div>
    </div>

    <p id="inlineTip" class="inline-tip">Se o v√≠deo n√£o iniciar, toque em <strong>‚ãØ</strong> e selecione <strong>Abrir no navegador</strong>.</p>

    <section class="about" aria-label="Sobre a TV Marata√≠zes">
      <h1>TV Marata√≠zes ‚Äî streaming local</h1>
      <p>
        Canal de <strong>streaming ao vivo</strong> com programa√ß√£o local, quadros originais e cobertura cultural da nossa regi√£o.
        Assista por aqui no site em tela cheia e volte sempre para conferir as novidades.
      </p>
      <div class="actions">
        <a class="btn" href="/programacao.html">üì∫ Programa√ß√£o</a>
        <a class="btn" href="https://instagram.com/tvmarataizes" target="_blank" rel="noopener">üì∑ Instagram</a>
      </div>
    </section>
  </main>

  <script>
    (() => {
      const ua = navigator.userAgent || "";
      const isInApp = /Instagram|FBAN|FBAV|FB_IAB|TikTok/i.test(ua);
      const params = new URLSearchParams(location.search);
      const force = params.has("force"); // ?force = ignora overlay (para testes)
      const overlay = document.getElementById('appOverlay');
      const inlineTip = document.getElementById('inlineTip');
      const tryOpen = document.getElementById('tryOpen');
      const dismiss = document.getElementById('dismiss');
      const copyUrl = document.getElementById('copyUrl');

      // Se veio de app (IG/FB/TikTok), mostramos overlay em vez de redirecionar
      if (isInApp && !force) {
        overlay.style.display = 'grid';
        inlineTip.style.display = 'block';
      }

      // Tentar abrir no navegador (sem mencionar plataforma)
      tryOpen?.addEventListener('click', () => {
        // Abre a pr√≥pria URL em nova aba; no iOS/Android alguns apps oferecem "Abrir no navegador"
        window.open(location.href.split('?')[0], '_blank', 'noopener,noreferrer');
      });

      // Manter assim mesmo
      dismiss?.addEventListener('click', () => {
        overlay.style.display = 'none';
      });

      // Copiar URL para o usu√°rio colar no navegador
      copyUrl?.addEventListener('click', async () => {
        try {
          await navigator.clipboard.writeText(location.href.split('?')[0]);
          copyUrl.textContent = 'Link copiado ‚úì';
          setTimeout(() => copyUrl.textContent = 'Copiar link', 2000);
        } catch (e) {
          alert('Copie este endere√ßo: ' + location.href.split('?')[0]);
        }
      });
    })();
  </script>
</body>
</html>
