<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TV Marata√≠zes ‚Äî ao vivo</title>
  <meta name="description" content="TV Marata√≠zes ao vivo ‚Äî cultura, com√©rcio local e programa√ß√£o raiz do sul do Esp√≠rito Santo." />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <meta name="theme-color" content="#C4170C" />
  <style>
    :root{
      --gn-red:#C4170C;    /* faixa do ticker */
      --top-bg:#0a1628;    /* faixa do topo (clima) */
      --text:#ffffff;
      --ticker-h:86px;     /* altura do ticker */
      --ticker-fs:32px;    /* fonte do ticker */
      --speed:38s;         /* velocidade do ticker (‚Üì = mais r√°pido) */
    }
    html,body{margin:0;height:100%;background:#fff;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;color:var(--text)}

    /* Topo ‚Äì Clima */
    .topbar{position:fixed;top:0;left:0;right:0;height:56px;background:var(--top-bg);display:flex;align-items:center;padding:0 16px;box-shadow:0 6px 16px rgba(0,0,0,.25);pointer-events:none}
    .topbar iframe{width:100%;height:36px;border:0;background:transparent;pointer-events:none}

    /* Miolo ‚Äì Player responsivo */
    .stage{position:fixed;top:56px;bottom:var(--ticker-h);left:0;right:0;display:flex;align-items:center;justify-content:center;padding:16px}
    .player-box{width:min(100%,1200px);aspect-ratio:16/9;background:#000;border-radius:12px;overflow:hidden;box-shadow:0 6px 24px rgba(0,0,0,.25)}
    .player-box > *{width:100%;height:100%;border:0;display:block}

    /* Rodap√© ‚Äì Ticker */
    .ticker{position:fixed;left:0;right:0;bottom:0;height:var(--ticker-h);background:var(--gn-red);display:flex;align-items:center;gap:18px;overflow:hidden;border-top:4px solid rgba(0,0,0,.15);box-shadow:0 -10px 28px rgba(0,0,0,.35);pointer-events:none}
    .pill{margin-left:16px;padding:10px 14px;border-radius:10px;background:#000;color:#fff;font-weight:900;letter-spacing:.3px;text-transform:uppercase;white-space:nowrap;pointer-events:auto}
    .track{position:relative;flex:1;height:100%;overflow:hidden}
    .lane{position:absolute;top:0;left:0;height:100%;display:inline-flex;align-items:center;gap:36px;white-space:nowrap;font-weight:900;font-size:var(--ticker-fs);will-change:transform;animation:scroll var(--speed) linear infinite}
    @keyframes scroll{from{transform:translateX(0)}to{transform:translateX(-50%)}}

    /* Bot√µes do editor */
    .editor-wrap{position:fixed;left:12px;bottom:calc(var(--ticker-h) + 12px);z-index:9999;display:flex;gap:8px;align-items:center}
    .btn{padding:10px 12px;border:0;border-radius:10px;background:#000;color:#fff;font-weight:700;cursor:pointer;box-shadow:0 6px 16px rgba(0,0,0,.25)}
    .btn.secondary{background:#444}
    .hidden{display:none}

    @media (max-width:900px){
      :root{ --ticker-h:72px; --ticker-fs:28px; --speed:34s }
      .stage{padding:10px}
      .player-box{border-radius:8px}
    }
  </style>
</head>
<body>

  <!-- TOPO: Clima -->
  <div class="topbar" aria-label="Clima agora">
    <iframe
      src="https://www.meteoblue.com/en/weather/widget/daily/marataizes_brazil_3457819?geoloc=fixed&days=0&tempunit=CELSIUS&windunit=KILOMETER_PER_HOUR&precipunit=MILLIMETER&coloured=0&pictoicon=1&maxtemperature=1&mintemperature=1"
      scrolling="no" allowtransparency="true"
      sandbox="allow-same-origin allow-scripts allow-popups allow-popups-to-escape-sandbox">
    </iframe>
  </div>

  <!-- PLAYER TWITCH -->
  <div class="stage">
    <div class="player-box">
      <iframe
        src="https://player.twitch.tv/?channel=tvmarataizes&parent=tvmarataizes.com.br&parent=www.tvmarataizes.com.br&autoplay=true&muted=true"
        allow="autoplay; fullscreen; picture-in-picture"
        allowfullscreen
        title="TV Marata√≠zes ao vivo">
      </iframe>
    </div>
  </div>

  <!-- TICKER -->
  <div class="ticker" role="marquee" aria-label="Not√≠cias">
    <div class="pill">AO VIVO</div>
    <div class="track">
      <!-- 2 c√≥pias para rolagem cont√≠nua -->
      <div class="lane" id="lane">
        <!-- ALTERE AQUI RAUL (texto padr√£o) -->
        <span id="tickerText">
          üî¥ TV Marata√≠zes ao vivo ‚Äî üìç Marata√≠zes, Itapemirim e Pi√∫ma ‚Ä¢ Programa ‚ÄúFestival de cinema - Mostra Curtas-metragens‚Äù √†s 19h ‚Ä¢ √Äs 20h: Gente da Gente - Anuncie com a gente whatsapp 28 99903-6141
        </span>
        <!-- FIM ALTERA√á√ÉO -->
      </div>
    </div>
  </div>

  <!-- Editor r√°pido -->
  <div class="editor-wrap">
    <button id="editBtn" class="btn">‚úé Editar legenda</button>
    <button id="saveBtn" class="btn secondary hidden">Salvar</button>
    <button id="cancelBtn" class="btn secondary hidden">Cancelar</button>
  </div>

  <script>
  (function(){
    const lane = document.getElementById('lane');
    const baseEl = document.getElementById('tickerText');
    if (!lane || !baseEl) return;

    const qs = new URLSearchParams
